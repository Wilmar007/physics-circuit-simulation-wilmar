<!-- üö´ DO NOT EDIT THIS FILE
MAIN WEBSITE FILE.
ALL SIMULATORS ARE IN /simulators FOLDER ONLY.
-->
<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Electricity Lab</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
    }

    body {
      font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0a0e27 0%, #1a0a3e 50%, #0a0e27 100%);
      color: #e0e0ff;
      overflow-x: hidden;
      letter-spacing: 0.3px;
    }

    .main-wrapper {
      width: 100%;
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    .spark {
      position: fixed;
      width: 3px;
      height: 3px;
      background: #FFD700;
      border-radius: 50%;
      pointer-events: none;
      animation: sparkle 2s infinite;
      box-shadow: 0 0 10px #FFD700;
    }

    .header {
      background: linear-gradient(135deg, #1f0a4d 0%, #3d1a7f 50%, #2d0f5f 100%);
      padding: 3rem 2rem;
      text-align: center;
      border-bottom: 3px solid #00d4ff;
      position: relative;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0, 212, 255, 0.2);
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.2), transparent);
      animation: electric-sweep 4s infinite;
    }

    @keyframes electric-sweep {
      0% { left: -100%; }
      100% { left: 200%; }
    }

    .header h1 {
      font-size: 3rem;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 30px #00d4ff, 0 0 60px #0088ff;
      position: relative;
      background: linear-gradient(135deg, #00d4ff 0%, #00ffff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header p {
      font-size: 1.2rem;
      color: #00ffff;
      position: relative;
      font-weight: 300;
      letter-spacing: 1px;
    }

    .nav-menu {
      background: rgba(15, 10, 45, 0.8);
      backdrop-filter: blur(10px);
      padding: 1.2rem;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      border-bottom: 2px solid #00d4ff;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    .nav-btn {
      background: linear-gradient(135deg, #00d4ff 0%, #00ffff 100%);
      color: #0a0e27;
      border: none;
      padding: 0.9rem 1.8rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
      font-size: 1rem;
    }

    .nav-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 212, 255, 0.5);
    }

    .nav-btn.active {
      background: linear-gradient(135deg, #00ffff 0%, #00d4ff 100%);
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.8);
      transform: scale(1.05);
    }

    .content {
      padding: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .section {
      display: none;
      animation: fadeIn 0.5s;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card {
      background: rgba(30, 15, 60, 0.7);
      border: 2px solid #00d4ff;
      border-radius: 15px;
      padding: 2.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 32px rgba(0, 212, 255, 0.15);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
      animation: rotate 15s linear infinite;
    }

    /* Ensure embedded iframes inside sections/cards are fully interactive
       - enable pointer events on iframes
       - place iframes above decorative pseudo-elements that might overlap them
       - do not alter layout or colors */
    .section iframe,
    .card iframe {
      pointer-events: auto;
      position: relative;
      z-index: 5;
      -webkit-user-select: auto;
      user-select: auto;
    }

    /* keep decorative pseudo-element behind content */
    .card::before {
      z-index: 0;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .card-content {
      position: relative;
      z-index: 1;
    }

    .card h2 {
      color: #00d4ff;
      margin-bottom: 1.5rem;
      font-size: 2rem;
      text-shadow: 0 0 15px rgba(0, 212, 255, 0.5);
    }

    .card h3 {
      color: #00ffff;
      margin-top: 1.5rem;
      margin-bottom: 1rem;
      font-size: 1.4rem;
    }

    .calculator {
      background: rgba(0, 0, 0, 0.4);
      padding: 1.5rem;
      border-radius: 10px;
      border: 2px solid #B8860B;
      margin: 1rem 0;
    }

    .input-group {
      margin-bottom: 1rem;
    }

    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #00d4ff;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .input-group input, .input-group select {
      width: 100%;
      padding: 0.9rem;
      background: rgba(10, 14, 39, 0.8);
      border: 2px solid #00d4ff;
      border-radius: 8px;
      color: #00ffff;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: #00ffff;
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
      background: rgba(20, 20, 60, 0.9);
    }

    .btn {
      background: linear-gradient(135deg, #00d4ff 0%, #00ffff 100%);
      color: #0a0e27;
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      margin: 0.5rem;
      box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 212, 255, 0.5);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #1a0a3e 0%, #2d0f5f 100%);
      color: #00ffff;
      border: 2px solid #00d4ff;
    }

    .toggle-btn {
      background: linear-gradient(135deg, #00d4ff 0%, #00ffff 100%);
      color: #0a0e27;
      border: none;
      padding: 0.7rem 1.4rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      margin: 0.5rem 0;
      transition: all 0.3s ease;
    }

    .toggle-btn:hover {
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.7);
      transform: translateY(-1px);
    }

    .solution {
      background: rgba(0, 212, 255, 0.1);
      border: 2px solid #00d4ff;
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1rem;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease;
    }

    .solution.show {
      max-height: 1000px;
    }

    .solution h4 {
      color: #00d4ff;
      margin-bottom: 1rem;
    }

    .solution p {
      color: #e0e0ff;
      line-height: 1.8;
      margin: 0.5rem 0;
    }

    .simulator {
      background: rgba(10, 14, 39, 0.8);
      border: 3px solid #00d4ff;
      border-radius: 15px;
      padding: 2rem;
      margin: 1rem 0;
      position: relative;
      backdrop-filter: blur(10px);
    }

    .circuit-display {
      background: rgba(20, 15, 50, 0.8);
      border: 2px solid #00d4ff;
      border-radius: 10px;
      padding: 2rem;
      text-align: center;
      margin: 1rem 0;
      min-height: 200px;
      position: relative;
      overflow: hidden;
    }

    .electron {
      width: 10px;
      height: 10px;
      background: #00d4ff;
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 15px #00d4ff, 0 0 25px #00ffff;
      animation: flow 3s linear infinite;
    }

    @keyframes flow {
      0% { left: 5%; top: 30%; }
      15% { left: 35%; top: 30%; }
      25% { left: 35%; top: 50%; }
      35% { left: 50%; top: 50%; }
      50% { left: 65%; top: 50%; }
      60% { left: 65%; top: 70%; }
      75% { left: 35%; top: 70%; }
      90% { left: 5%; top: 70%; }
      100% { left: 5%; top: 30%; }
    }

    .parallel-electron {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 15px currentColor, 0 0 30px currentColor;
    }

    .parallel-electron-1 {
      animation: parallelFlow1 4s linear infinite;
    }

    .parallel-electron-2 {
      animation: parallelFlow2 4s linear infinite;
    }

    .parallel-electron-3 {
      animation: parallelFlow3 4s linear infinite;
    }

    @keyframes parallelFlow1 {
      0% { left: 10%; top: 50px; }
      15% { left: 30%; top: 50px; }
      30% { left: 30%; top: 120px; }
      40% { left: 30%; top: 160px; }
      55% { left: 30%; top: 350px; }
      70% { left: 10%; top: 350px; }
      85% { left: 10%; top: 200px; }
      100% { left: 10%; top: 50px; }
    }

    @keyframes parallelFlow2 {
      0% { left: 10%; top: 50px; }
      15% { left: 50%; top: 50px; }
      30% { left: 50%; top: 120px; }
      40% { left: 50%; top: 160px; }
      55% { left: 50%; top: 350px; }
      70% { left: 10%; top: 350px; }
      85% { left: 10%; top: 200px; }
      100% { left: 10%; top: 50px; }
    }

    @keyframes parallelFlow3 {
      0% { left: 10%; top: 50px; }
      15% { left: 70%; top: 50px; }
      30% { left: 70%; top: 120px; }
      40% { left: 70%; top: 160px; }
      55% { left: 70%; top: 350px; }
      70% { left: 10%; top: 350px; }
      85% { left: 10%; top: 200px; }
      100% { left: 10%; top: 50px; }
    }

    .lights-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 2rem;
      padding: 2rem;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 10px;
      margin: 1rem 0;
    }

    .bulb {
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }

    .bulb-icon {
      font-size: 6rem;
      filter: drop-shadow(0 0 15px currentColor) drop-shadow(0 0 30px currentColor);
      transition: all 0.3s;
    }

    .bulb.on .bulb-icon {
      animation: christmasGlow 1.2s ease-in-out infinite;
    }

    .bulb.off .bulb-icon {
      opacity: 0.2;
      filter: grayscale(100%) brightness(0.3);
      animation: none;
    }

    @keyframes christmasGlow {
      0%, 100% { 
        filter: drop-shadow(0 0 10px currentColor) drop-shadow(0 0 20px currentColor);
        transform: scale(1);
      }
      50% { 
        filter: drop-shadow(0 0 25px currentColor) drop-shadow(0 0 45px currentColor) drop-shadow(0 0 60px currentColor);
        transform: scale(1.05);
      }
    }

    .bulb-label {
      color: #00d4ff;
      font-weight: 600;
      margin-top: 0.5rem;
    }

    .battery-display {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      padding: 2rem;
      background: rgba(20, 15, 50, 0.7);
      border: 2px solid #00d4ff;
      border-radius: 10px;
      margin: 1rem 0;
      flex-wrap: wrap;
    }

    .battery {
      font-size: 3rem;
      position: relative;
    }

    .battery-voltage {
      position: absolute;
      top: -1.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.8rem;
      color: #00d4ff;
      white-space: nowrap;
      font-weight: 600;
    }

    .flashlight {
      position: relative;
      width: 200px;
      height: 80px;
      margin: 2rem auto;
    }

    .flashlight-svg {
      position: relative;
      z-index: 2;
    }

    .beam-container {
      position: absolute;
      left: 180px;
      top: 46%;
      transform: translateY(-50%);
      z-index: 1;
      transition: all 0.5s ease;
    }

    .light-beam {
      transition: all 0.5s ease;
      filter: blur(3px);
    }

    .beam-glow {
      transition: all 0.5s ease;
      filter: blur(15px);
    }

    input[type="range"] {
      width: 100%;
      height: 8px;
      background: linear-gradient(to right, rgba(0, 212, 255, 0.3), rgba(0, 255, 136, 0.3));
      border-radius: 5px;
      outline: none;
      border: 2px solid #00d4ff;
    }

    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #00d4ff 0%, #00ffff 100%);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(0, 212, 255, 0.8);
      transition: all 0.3s ease;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      box-shadow: 0 0 20px rgba(0, 212, 255, 1);
      transform: scale(1.2);
    }

    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #00d4ff 0%, #00ffff 100%);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(0, 212, 255, 0.8);
      border: none;
      transition: all 0.3s ease;
    }

    input[type="range"]::-moz-range-thumb:hover {
      box-shadow: 0 0 20px rgba(0, 212, 255, 1);
      transform: scale(1.2);
    }

    .metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .metric {
      background: rgba(0, 212, 255, 0.15);
      border: 2px solid #00d4ff;
      border-radius: 8px;
      padding: 1.2rem;
      text-align: center;
    }

    .metric-label {
      color: #00ffff;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .metric-value {
      color: #00d4ff;
      font-size: 1.8rem;
      font-weight: 700;
      text-shadow: 0 0 10px rgba(0, 212, 255, 0.6);
    }

    .metric-unit {
      color: #00d4ff;
      font-size: 1rem;
      margin-left: 0.3rem;
    }

    .info-box {
      background: rgba(0, 212, 255, 0.1);
      border-left: 4px solid #00d4ff;
      padding: 1.2rem;
      margin: 1rem 0;
      border-radius: 6px;
    }

    .info-box.success {
      border-left-color: #00ff88;
      background: rgba(0, 255, 136, 0.1);
    }

    .info-box.warning {
      border-left-color: #ff6600;
      background: rgba(255, 102, 0, 0.1);
    }

    .home-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .home-card {
      background: rgba(30, 15, 60, 0.7);
      border: 2px solid #00d4ff;
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .home-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
      border-color: #00ffff;
    }

    .home-card-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .home-card h3 {
      color: #00d4ff;
      margin: 1rem 0;
    }

    .home-card p {
      color: #FFFF00;
      line-height: 1.6;
    }

    .appliance-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      margin: 2rem 0;
    }

    .appliance {
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid #B8860B;
      border-radius: 10px;
      padding: 1.5rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .appliance.active {
      border-color: #FFD700;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
      background: rgba(184, 134, 11, 0.3);
    }

    .appliance-icon {
      font-size: 3rem;
      margin-bottom: 0.5rem;
    }

    .appliance.active .appliance-icon {
      animation: pulse 1s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 2rem;
      }
      
      .nav-menu {
        flex-direction: column;
      }
      
      .content {
        padding: 1rem;
      }
      
      .home-grid {
        grid-template-columns: 1fr;
      }
    }
    #parallel #parallel-circuit-display {
  display: none;
}
#ohms-law .simulator {
  display: none;
}
.flashlight {
  position: relative;
  display: inline-block;
}

.beam-glow {
  transform-origin: left center;
}
/* CENTER THE FLASHLIGHT */
.flashlight {
  position: relative;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 2rem auto 2rem 10rem;
  pointer-events: none;
}

/* CENTER THE BEAM RELATIVE TO FLASHLIGHT */
.beam-container {
  position: absolute;
  left: 150px;
  top: 40px;
  transform: translateY(-85px);
  pointer-events: none;
  z-index: -1;
}

/* MAKE BEAM EXPAND FROM CENTER */
.light-beam,
.beam-glow {
  transform-origin: left center;
}
/* BIGGER BEAM BASE SIZE */
.beam-container svg {
  width: 500px;   /* beam length */
  height: 200px;  /* beam height */
}

/* Make beam look wider */
.light-beam,
.beam-glow {
  transform-origin: left center;
}
.flashlight-svg {
transform: scale(3);
pointer-events: none;
}
.beam-container,
.beam-container svg,
.light-beam {
  pointer-events: none;
}
button,
.input-group,
.controls {
  position: relative;
  z-index: 20;
}

/* üîµ Household Energy Manager ‚Äì ACTIVE CARD */
.household-card.active {
  border-color: #00ffcc;
  box-shadow: 0 0 20px rgba(0, 255, 204, 0.6);
}
/* ============================= */
/* SERIES QUIZ STYLES */
/* ============================= */

.series-quiz-container {
  margin-top: 60px;
  padding: 30px;
  background: linear-gradient(135deg, #0b1026, #121a3a);
  border: 2px solid #00ffff;
  border-radius: 20px;
  box-shadow: 0 0 25px rgba(0,255,255,0.35);
}

.series-quiz-title {
  text-align: center;
  color: #00ffff;
  font-size: 1.8rem;
  margin-bottom: 20px;
  text-shadow: 0 0 12px rgba(0,255,255,0.7);
}

.series-quiz-container iframe {
  border-radius: 14px;
  background: #000;
}
/* üîå Power iframe full-width fix */
.power-full {
  width: 100%;
  max-width: 100%;
  padding: 0;
}

  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <!-- Welcome / Login Gate (top-of-body, self-contained) -->
  <div id="welcome-gate">
    <style>
      /* Welcome overlay visuals updated per request: larger card, pulsing glow, animated background */
      #welcome-gate { position: fixed; inset: 0; z-index: 99999; display: flex; align-items: center; justify-content: center; background: linear-gradient(180deg,#040214 0%, #090526 60%); }

      /* fuller, centered card area */
      #welcome-gate .gate-inner { position: relative; display:flex; align-items:center; justify-content:center; width:100%; height:100%; padding:40px; box-sizing:border-box; }

      /* subtle neon waves behind card (GPU-friendly: animates background-position) */
      .neon-waves{ position:absolute; inset:-10%; z-index:0; pointer-events:none; background-image: radial-gradient(circle at 20% 20%, rgba(0,220,255,0.06), transparent 6%), radial-gradient(circle at 80% 80%, rgba(180,80,255,0.04), transparent 8%), linear-gradient(90deg, rgba(0,220,255,0.02), rgba(160,80,255,0.02)); background-size: 200% 200%; animation: wavesMove 14s linear infinite; mix-blend-mode:screen; filter: blur(18px); }
      @keyframes wavesMove{ 0%{background-position:0% 50%}50%{background-position:50% 60%}100%{background-position:0% 50%} }

      /* pulsating glow ring around the card (soft expand/contract) */
      .glow-ring{ position:absolute; z-index:1; width:calc(760px + 80px); max-width:calc(100% - 48px); height:auto; aspect-ratio: 3 / 1; pointer-events:none; filter:blur(28px); opacity:0.18; animation: ringPulse 5.8s ease-in-out infinite; mix-blend-mode:screen; }
      .glow-ring::before{ content:''; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:100%; height:100%; border-radius:18px; background: linear-gradient(90deg, rgba(0,220,255,0.35), rgba(160,80,255,0.22), rgba(0,180,255,0.18)); }
      @keyframes ringPulse{ 0%{transform:scale(0.98)}50%{transform:scale(1.04)}100%{transform:scale(0.98)} }

      /* particles (few DOM nodes, hardware-accelerated transforms) */
      .particles{ position:absolute; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
      .particle{ position:absolute; width:10px; height:10px; border-radius:50%; background: radial-gradient(circle,#aefcff 0%, #00aaff 60%); box-shadow:0 0 12px rgba(0,200,255,0.75); opacity:0.9; transform:translate3d(-50%,-50%,0); will-change: transform; }
      .p1{ left:8%; top:22%; animation: parTravel 4s linear infinite; }
      .p2{ left:26%; top:36%; animation: parTravel 5.2s linear infinite; animation-delay:0.3s; }
      .p3{ left:52%; top:52%; animation: parTravel 3.6s linear infinite; animation-delay:0.6s; }
      .p4{ left:74%; top:68%; animation: parTravel 6s linear infinite; animation-delay:0.1s; }
      @keyframes parTravel{ 0%{transform:translateX(0) translateY(0) scale(1)}50%{transform:translateX(20vw) translateY(-6vh) scale(0.9)}100%{transform:translateX(0) translateY(0) scale(1)} }

      /* lightning arcs - light, subtle SVG stroke animation */
      .arcs{ position:absolute; inset:0; z-index:2; pointer-events:none; opacity:0.18; filter:blur(6px); }
      .arcs .bolt{ stroke:rgba(180,220,255,0.9); stroke-width:2; stroke-linecap:round; stroke-linejoin:round; stroke-dasharray:200; stroke-dashoffset:200; animation: boltDraw 3.8s ease-in-out infinite; }
      .arcs .bolt.delay{ animation-delay:1.5s; }
      @keyframes boltDraw{ 0%{stroke-dashoffset:200; opacity:0}10%{opacity:1}50%{stroke-dashoffset:0}90%{opacity:0.3}100%{stroke-dashoffset:-120} }

      /* central card: bigger and padded for easier typing */
      .gate-card { position: relative; z-index: 10003; display:flex; flex-direction:column; align-items:stretch; width: 880px; max-width:calc(100% - 48px); background: linear-gradient(180deg, rgba(8,10,20,0.98), rgba(10,6,26,0.92)); border: 1px solid rgba(0,220,255,0.10); border-radius:20px; padding:44px; box-shadow: 0 40px 120px rgba(0,0,0,0.75); color:#eafcff; backdrop-filter: blur(6px); }

      .wg-main-title{ text-align:center; width:100%; font-size:3.6rem; color:#00f6ff; margin:0 0 6px 0; letter-spacing:1px; text-shadow: 0 10px 60px rgba(0,212,255,0.20), 0 0 42px rgba(160,80,255,0.08); font-weight:900; }
      .gate-title{ font-size:1.1rem; color:#dffaff; font-weight:800; }
      .gate-desc{ color:#bfeaff; margin-top:6px; font-size:1rem; }

      .gate-header{ display:flex; align-items:center; gap:16px; margin-bottom:10px; }
      .gate-logo{ font-size:64px; text-shadow:0 0 36px #00d4ff; }

      /* Larger inputs with glowing borders and focus pulse */
      .gate-form{ display:flex; gap:18px; margin-top:18px; align-items:flex-end; }
      .form-col{ flex:1; }
      .form-control label{ display:block; color:#9feaff; font-weight:800; margin-bottom:8px; }
      .form-control input, .form-control select{ width:100%; padding:16px 16px; border-radius:12px; border:2px solid rgba(0,200,255,0.12); background: rgba(10,14,39,0.88); color:#eaffff; box-shadow: inset 0 2px 14px rgba(0,0,0,0.55); font-size:1.05rem; position:relative; z-index:10005; }
      /* Make the dropdown list readable: solid dark options and bright text */
      .form-control select option{ background-color:#0a0e27; color:#eaffff; font-size:1rem; }
      .form-control input:focus, .form-control select:focus{ outline:none; box-shadow: 0 0 38px rgba(0,200,255,0.34); border-color: rgba(0,220,255,0.5); animation: focusPulse 1.6s ease-in-out infinite; }
      /* Ensure opened native dropdown is not visually overlapped by decorative layers */
      .gate-card, .gate-card *{ z-index:10003; }
      /* Make select text larger and readable on projector/mobile */
      .form-control select{ font-size:1.05rem; }

      /* Some browsers don't allow full option styling, but provide best-effort rules */
      select::-ms-expand{ display:inline-block; }
      option{ padding:6px 8px; }
      @keyframes focusPulse{ 0%{box-shadow: 0 0 18px rgba(0,200,255,0.16)}50%{box-shadow: 0 0 30px rgba(0,200,255,0.28)}100%{box-shadow: 0 0 18px rgba(0,200,255,0.16)} }

      /* buttons: hover glow + CSS-only click ripple using ::after */
      .gate-actions{ display:flex; gap:16px; justify-content:flex-end; margin-top:22px; }
      .btn-neon{ padding:16px 22px; border-radius:14px; border:none; cursor:pointer; font-weight:900; letter-spacing:0.6px; position:relative; overflow:hidden; transition: transform .14s ease, box-shadow .18s ease; }
      .btn-neon::after{ content:''; position:absolute; left:50%; top:50%; width:8px; height:8px; background:rgba(255,255,255,0.12); border-radius:50%; transform:translate(-50%,-50%) scale(1); opacity:0; transition:opacity .22s; }
      .btn-neon:active::after{ opacity:0.9; transform:translate(-50%,-50%) scale(30); transition: transform .5s cubic-bezier(.2,.8,.2,1), opacity .5s; }
      .btn-neon:hover{ transform:translateY(-4px); box-shadow: 0 22px 80px rgba(0,200,255,0.12); }
      .btn-student{ background: linear-gradient(135deg,#00d4ff,#00f6ff); color:#041025; }
      .btn-teacher{ background: linear-gradient(135deg,#6d3bb0,#b07cff); color:#fff; }

      .error-msg{ color:#ffb3b3; margin-top:14px; font-weight:800; min-height:24px; }

      /* responsive scaling */
      @media (max-width:980px){ .wg-main-title{ font-size:2.8rem; } .gate-card{ width: calc(100% - 36px); padding:28px; border-radius:14px; } .gate-form{ flex-direction:column; } .gate-actions{ justify-content:stretch; flex-direction:column-reverse; } .glow-ring{ width:calc(100% - 48px); } }
      @media (max-width:520px){ .wg-main-title{ font-size:1.6rem; } .gate-logo{ font-size:36px; } .form-control input, .form-control select{ padding:12px 12px; } }
    </style>

    <div class="gate-inner" role="dialog" aria-modal="true">
      <div class="neon-waves" aria-hidden="true"></div>
      <div class="particles" aria-hidden="true">
        <span class="particle p1"></span>
        <span class="particle p2"></span>
        <span class="particle p3"></span>
        <span class="particle p4"></span>
      </div>
      <div class="glow-ring" aria-hidden="true"></div>

      <svg class="arcs" viewBox="0 0 1200 600" preserveAspectRatio="none" aria-hidden="true">
        <path class="bolt" d="M60 140 C140 80, 240 200, 360 140 S540 200, 660 140" fill="none" />
        <path class="bolt delay" d="M200 360 C300 300, 420 420, 540 360 S780 420, 900 360" fill="none" />
      </svg>

      <div class="gate-card" role="document">
        <h1 class="wg-main-title">‚ö° Electricity Lab</h1>
        <div class="gate-header">
          <div class="gate-logo">‚ö°</div>
          <div>
            <div class="gate-title">Interactive Simulators & Experiments</div>
            <div class="gate-desc">Explore circuits, run simulators, and take quizzes ‚Äî enter to begin</div>
          </div>
        </div>

        <div class="gate-form">
          <div class="form-col form-control">
            <label for="wg-student-name">Student Name</label>
            <input id="wg-student-name" type="text" placeholder="Full name (required)">
          </div>
          <div class="form-col form-control">
            <label for="wg-student-section">Section</label>
            <select id="wg-student-section">
              <option value="">Select section</option>
              <option>STEM 201</option>
              <option>STEM 202</option>
              <option>STEM 203</option>
              <option>STEM 204</option>
              <option>STEM 205</option>
              <option>STEM 206</option>
              <option>STEM 207</option>
            </select>
          </div>
        </div>

        <div class="gate-actions">
          <button id="wg-student-enter" class="btn-neon btn-student">Enter as Student</button>
          <button id="wg-teacher-access" class="btn-neon btn-teacher">Teacher Access</button>
        </div>

        <div id="wg-error" class="error-msg" aria-live="polite"></div>
      </div>
    </div>

    <script>
      (function(){
      (function(){
        // Teacher Dashboard script (reads localStorage.quizRecords)
        function td_loadRecords(){
          try{ return JSON.parse(localStorage.getItem('quizRecords')||'[]'); }catch(e){ return []; }
        }

        function td_formatCSV(rows){
          const esc = v => '"'+String(v === null || typeof v === 'undefined' ? '' : v).replace(/"/g,'""')+'"';
          const header = ['Name','Section','Quiz','Score','Percentage','Passed','Date'];
          const lines = [header.map(esc).join(',')];
          rows.forEach(r=>{
            lines.push([r.name||'', r.section||'', r.quiz||'', r.score!=null?r.score:'', r.percentage!=null?Number(r.percentage).toFixed(2):'', r.passed? 'YES':'NO', r.timestamp||'' ].map(esc).join(','));
          });
          return lines.join('\n');
        }

        function td_renderTable(){
          const container = document.getElementById('td-table-container');
          if(!container) return;
          const rows = td_loadRecords();
          if(!rows.length){ container.innerHTML = '<div style="color:#bfeaff; padding:8px;">No quiz records found.</div>'; return; }
          const table = document.createElement('table'); table.style.width='100%'; table.style.borderCollapse='collapse';
          const thead = document.createElement('thead'); const hr = document.createElement('tr'); ['Name','Section','Quiz','Score','%','Passed','Date'].forEach(t=>{ const th=document.createElement('th'); th.textContent=t; th.style.textAlign='left'; th.style.padding='6px'; th.style.color='#bfeaff'; th.style.borderBottom='1px solid rgba(255,255,255,0.06)'; hr.appendChild(th); }); thead.appendChild(hr); table.appendChild(thead);
          const tbody = document.createElement('tbody');
          rows.forEach(r=>{
            const tr = document.createElement('tr');
            [r.name||'', r.section||'', r.quiz||'', r.score!=null?r.score:'', r.percentage!=null?Number(r.percentage).toFixed(2):'', r.passed? 'YES':'NO', r.timestamp||'' ].forEach(v=>{ const td=document.createElement('td'); td.textContent = v; td.style.padding='6px'; td.style.borderBottom='1px solid rgba(255,255,255,0.03)'; td.style.color='#eafcff'; tr.appendChild(td); });
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);
          container.innerHTML = ''; container.appendChild(table);
        }

        function td_updateVisibility(){
          const dash = document.getElementById('teacherDashboard');
          const role = localStorage.getItem('role');
          if(dash){
            if(role === 'teacher'){
              dash.classList.remove('teacher-hidden');
              dash.style.display = '';
              td_renderTable();
            } else {
              dash.classList.add('teacher-hidden');
              dash.style.display = 'none';
            }
          }
        }

        document.addEventListener('DOMContentLoaded', function(){
          // wire buttons
          const dl = document.getElementById('td-download');
          const cl = document.getElementById('td-clear');
          if(dl){ dl.addEventListener('click', function(){ const rows = td_loadRecords(); const csv = td_formatCSV(rows); const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'quiz-records.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); }); }
          if(cl){ cl.addEventListener('click', function(){ if(!confirm('Clear all quiz records? This cannot be undone.')) return; localStorage.removeItem('quizRecords'); td_renderTable(); }); }
          td_updateVisibility();
        });

        // ensure visibility toggled immediately in case DOMContentLoaded already fired
        try{ td_updateVisibility(); }catch(e){}

        // react to role or records changes
        window.addEventListener('storage', function(e){ if(e.key === 'role' || e.key === 'quizRecords'){ td_updateVisibility(); } });
      })();
        const wrapper = document.getElementById('welcome-gate');
        const studentBtn = document.getElementById('wg-student-enter');
        const teacherBtn = document.getElementById('wg-teacher-access');
        const nameInput = document.getElementById('wg-student-name');
        const sectionSelect = document.getElementById('wg-student-section');
        const errorBox = document.getElementById('wg-error');
        const TEACHER_PASS = 'teacher2026';

        // manual-only entry control
        window.hasEnteredSite = false;

        function getMain(){ return document.querySelector('.main-wrapper'); }

        function showMain(){
          try{
            const main = getMain();
            if(main) main.style.display = '';
            if(wrapper) wrapper.style.display = 'none';
          }catch(e){ console.error(e); }
        }

        function saveAndEnter(role){
          try{
            const name = nameInput && nameInput.value && nameInput.value.trim();
            const section = sectionSelect && sectionSelect.value;
            if(role === 'student'){
              if(!name){ errorBox.textContent = 'Please enter student name.'; return false; }
              if(!section){ errorBox.textContent = 'Please select a section.'; return false; }
              localStorage.setItem('studentName', name);
              localStorage.setItem('studentSection', section);
            }
            localStorage.setItem('role', role);
            showMain();
            return true;
          }catch(e){ console.error(e); errorBox.textContent = 'Unexpected error.'; return false; }
        }

        if(studentBtn){
          studentBtn.addEventListener('click', function(){
            errorBox.textContent='';
            // explicit manual entry only
            window.hasEnteredSite = true;
            if(saveAndEnter('student')){
              // ensure main is shown and overlay hidden
              try{ const main = getMain(); if(main) main.style.display = ''; if(wrapper) wrapper.style.display = 'none'; }catch(e){}
            }
          });
        }

        if(teacherBtn){
          teacherBtn.addEventListener('click', function(){
            errorBox.textContent='';
            try{
              const pass = prompt('Enter teacher password:');
              if(pass === null) return;
              if(pass === TEACHER_PASS){
                window.hasEnteredSite = true;
                localStorage.setItem('role','teacher');
                try{ const main = getMain(); if(main) main.style.display = ''; if(wrapper) wrapper.style.display = 'none'; }catch(e){}
              } else {
                errorBox.textContent = 'Incorrect password.';
              }
            }catch(e){ console.error(e); }
          });
        }
      })();
    </script>
  </div>

  <div class="main-wrapper" style="display:none;">
   <div class="spark" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
   <div class="spark" style="top: 30%; left: 80%; animation-delay: 0.5s;"></div>
   <div class="spark" style="top: 60%; left: 15%; animation-delay: 1s;"></div>
   <div class="spark" style="top: 80%; left: 70%; animation-delay: 1.5s;"></div>
   <div class="spark" style="top: 45%; left: 50%; animation-delay: 0.8s;"></div>
   <header class="header">
    <h1 id="main-title">‚ö° ELECTRICITY LAB ‚ö°</h1>
    <p id="subtitle">Interactive Electricity Learning Platform</p>
   </header>
   <nav class="nav-menu"><button class="nav-btn active" onclick="showSection('home')">üè† Home</button> <button class="nav-btn" onclick="showSection('ohms-law')">‚ö° Ohm's Law</button> <button class="nav-btn" id="seriesBtn" onclick="showSection('series')">
  üîí Series Circuits
</button>
 <button
  id="parallelBtn"
  class="nav-btn"
  onclick="showSection('parallel')"
>
  üîí Parallel Circuits
<button class="nav-btn" onclick="showSection('power')">üí™ Power</button> <button class="nav-btn" onclick="showSection('practical')">üîß Practical</button><button class="nav-btn" onclick="showSection('electricCharge')">‚ö° Electric Charge</button><button class="nav-btn" onclick="showSection('magnetism')">üß≤ Magnetism</button>
   </nav>
   <main class="content">
    <!-- ‚ö° ELECTRIC CHARGE SECTION -->

</section>
    <!-- üîí TEACHER CONTROLS (PART 1) -->
<div id="teacherControls" style="
  margin: 20px 0;
  padding: 15px;
  text-align: center;
  background: rgba(0,0,0,0.4);
  border-radius: 12px;
">

  <button onclick="lockAllTopics()" style="
    padding: 12px 18px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    background: #e53935;
    color: white;
    cursor: pointer;
    margin-right: 10px;
  ">
    üîí Lock All Topics
  </button>

  <button onclick="teacherUnlock()" style="
    padding: 12px 18px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    background: #43a047;
    color: white;
    cursor: pointer;
  ">
    üîë Teacher Unlock
  </button>

</div>
<!-- Teacher Dashboard (visible only to teachers) -->
<style>
  /* hide teacher-only UI by default for all users */
  .teacher-hidden { display: none !important; }
</style>
<div id="teacherDashboard" class="teacher-hidden" style="display:none; margin: 10px 0; padding: 12px; background: rgba(5,8,20,0.85); border: 1px solid rgba(0,212,255,0.06); border-radius:8px;">
  <h3 style="color:#00f6ff; margin:0 0 8px 0;">Teacher Dashboard ‚Äî Quiz Records</h3>
  <div style="margin-bottom:8px;">
    <button id="td-download" class="btn">Download CSV (Excel)</button>
    <button id="td-clear" class="btn btn-secondary">Clear Records</button>
  </div>
  <div id="td-table-container" style="max-height:260px; overflow:auto; background: rgba(0,0,0,0.2); padding:6px; border-radius:6px;"></div>
</div>
<!-- Home Section -->
    <section id="home" class="section active">
     <div class="card">
      <div class="card-content">
       <h2 id="welcome-text">‚ö° Welcome to the Electricity Lab! ‚ö°</h2>
       <p style="font-size: 1.2rem; color: #FFFF00; margin-bottom: 2rem;">Choose a topic below to start exploring electricity through interactive simulators and calculators!</p>
      </div>
     </div>
     <div class="home-grid">
      <div class="home-card" onclick="showSection('ohms-law')">
       <div class="home-card-icon">
        ‚ö°
       </div>
       <h3>Ohm's Law</h3>
       <p>Master the fundamental relationship between voltage, current, and resistance</p>
      </div>
      <div class="home-card" onclick="showSection('series')">
       <div class="home-card-icon">
        üîó
       </div>
       <h3>Series Circuits</h3>
       <p>Explore Christmas lights and flashlight batteries in series connections</p>
      </div>
      <div id="parallelCard" class="home-card" onclick="showSection('parallel')">
       <div class="home-card-icon">
        üè†
       </div>
       <h3>Parallel Circuits</h3>
       <p>Control home appliances and learn parallel circuit behavior</p>
      </div>
      
      <div class="home-card" onclick="showSection('power')">
       <div class="home-card-icon">
        üí™
       </div>
       <h3>Electrical Power</h3>
       <p>Calculate power consumption and energy costs for real devices</p>
      </div>
      <div class="home-card" onclick="showSection('practical')">
       <div class="home-card-icon">
        üîß
       </div>
       <h3>Practical Applications</h3>
       <p>Battery banks, solar systems, and automotive circuits</p>
      </div>
     </div>
    </section><!-- Ohm's Law Section -->
    <section id="ohms-law" class="section">
<div style="
  background: linear-gradient(135deg, #12002f, #1e0b4f);
  padding: 32px;
  border-radius: 22px;
  border: 2px solid rgba(0,255,255,0.35);
  box-shadow:
    0 0 30px rgba(0,255,255,0.25),
    inset 0 0 25px rgba(0,255,255,0.15);
">
  <iframe 
    src="ohms-simulator.html" 
    width="100%" 
    height="1000" 
    style="border:none; border-radius:16px; background:#ffffff;">
  </iframe>
</div>
     <div class="card">
      <div class="card-content">
       <h2>‚ö° Ohm's Law Calculator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Enter any 2 values, and the calculator will find the third!</p>
       <div class="calculator">
        <div class="input-group"><label for="voltage">Voltage (V)</label> <input type="number" id="voltage" placeholder="Enter voltage" oninput="calculateOhmsLaw()">
        </div>
        <div class="input-group"><label for="current">Current (I) in Amperes</label> <input type="number" id="current" placeholder="Enter current" oninput="calculateOhmsLaw()">
        </div>
        <div class="input-group"><label for="resistance">Resistance (R) in Ohms</label> <input type="number" id="resistance" placeholder="Enter resistance" oninput="calculateOhmsLaw()">
        </div><button class="btn" onclick="calculateOhmsLaw()">Calculate</button> <button class="btn-secondary btn" onclick="clearOhmsLaw()">Clear</button>
        <div id="ohms-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <p style="color: #FFD700; font-weight: bold; margin-bottom: 0.5rem;">Result:</p>
         <p id="ohms-answer" style="color: #FFFF00; font-size: 1.2rem;"></p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üß™ Interactive Circuit Simulator</h2>
       <div class="simulator">
        <div style="text-align: center; margin-bottom: 1rem;">
         <p style="color: #FFD700; font-size: 1.2rem;">Adjust the values to see electrons flow!</p>
        </div>
        <div class="input-group"><label for="sim-voltage">Voltage: <span id="sim-voltage-display" style="color: #FFD700;">12</span>V</label> <input type="range" id="sim-voltage" min="0" max="24" value="12" step="1" oninput="updateSimulation()">
        </div>
        <div class="input-group"><label for="sim-resistance">Resistance: <span id="sim-resistance-display" style="color: #FFD700;">100</span>Œ©</label> <input type="range" id="sim-resistance" min="10" max="1000" value="100" step="10" oninput="updateSimulation()">
        </div>
        <div class="circuit-display" id="circuit-display">
         <svg width="100%" height="200" style="position: relative;"><line x1="10%" y1="50%" x2="90%" y2="50%" stroke="#FFD700" stroke-width="3" /> <line x1="90%" y1="50%" x2="90%" y2="80%" stroke="#FFD700" stroke-width="3" /> <line x1="90%" y1="80%" x2="10%" y2="80%" stroke="#FFD700" stroke-width="3" /> <line x1="10%" y1="80%" x2="10%" y2="50%" stroke="#FFD700" stroke-width="3" /> <circle cx="10%" cy="65%" r="15" fill="#8B0000" stroke="#FFD700" stroke-width="2" /> <text x="10%" y="68%" text-anchor="middle" fill="#FFD700" font-size="12">
           +
          </text> <rect x="42%" y="45%" width="16%" height="10%" fill="#8B0000" stroke="#FFD700" stroke-width="2" /> <text x="50%" y="53%" text-anchor="middle" fill="#FFD700" font-size="10">
           R
          </text>
         </svg>
         <div class="electron" style="animation-duration: 3s;"></div>
        </div>
        <div class="metrics">
         <div class="metric">
          <div class="metric-label">
           Voltage
          </div>
          <div class="metric-value">
           <span id="sim-v-value">12</span><span class="metric-unit">V</span>
          </div>
         </div>
         <div class="metric">
          <div class="metric-label">
           Current
          </div>
          <div class="metric-value">
           <span id="sim-i-value">0.12</span><span class="metric-unit">A</span>
          </div>
         </div>
         <div class="metric">
          <div class="metric-label">
           Resistance
          </div>
          <div class="metric-value">
           <span id="sim-r-value">100</span><span class="metric-unit">Œ©</span>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üìö Practice Problems</h2>
       <div style="margin: 1.5rem 0;">
        <h3>Problem 1: Home Light Bulb</h3>
        <p style="color: #FFFF00; line-height: 1.8;">A light bulb in your home operates at 220V and draws 0.45A of current. What is its resistance?</p><button class="toggle-btn" onclick="toggleSolution('sol1')">Show Solution</button>
        <div id="sol1" class="solution">
         <h4>Solution:</h4>
         <p><strong>Given:</strong> V = 220V, I = 0.45A</p>
         <p><strong>Formula:</strong> R = V / I</p>
         <p><strong>Calculation:</strong> R = 220V / 0.45A = 488.89Œ©</p>
         <p><strong>Answer:</strong> The light bulb has a resistance of approximately 489Œ©</p>
        </div>
       </div>
       <div style="margin: 1.5rem 0;">
        <h3>Problem 2: Phone Charger</h3>
        <p style="color: #FFFF00; line-height: 1.8;">Your phone charger provides 5V and your phone has an internal resistance of 10Œ©. How much current flows?</p><button class="toggle-btn" onclick="toggleSolution('sol2')">Show Solution</button>
        <div id="sol2" class="solution">
         <h4>Solution:</h4>
         <p><strong>Given:</strong> V = 5V, R = 10Œ©</p>
         <p><strong>Formula:</strong> I = V / R</p>
         <p><strong>Calculation:</strong> I = 5V / 10Œ© = 0.5A</p>
         <p><strong>Answer:</strong> The current flowing is 0.5A or 500mA</p>
        </div>
       </div>
       <div style="margin: 1.5rem 0;">
        <h3>Problem 3: Heating Element</h3>
        <p style="color: #FFFF00; line-height: 1.8;">An electric heater draws 10A of current through a resistance of 22Œ©. What voltage does it require?</p><button class="toggle-btn" onclick="toggleSolution('sol3')">Show Solution</button>
        <div id="sol3" class="solution">
         <h4>Solution:</h4>
         <p><strong>Given:</strong> I = 10A, R = 22Œ©</p>
         <p><strong>Formula:</strong> V = I √ó R</p>
         <p><strong>Calculation:</strong> V = 10A √ó 22Œ© = 220V</p>
         <p><strong>Answer:</strong> The heater requires 220V</p>
        </div>
       </div>
      </div>
     </div>
     <!-- Ohm‚Äôs Law Interactive Quiz -->
<div style="margin: 3rem 0;">
  <h3 style="color:#00f6ff; text-align:center;">
    Interactive Quiz: Ohm‚Äôs Law Mastery
  </h3>

  <iframe
    src="ohms-quiz.html"
    width="100%"
    height="700"
    style="
      border:none;
      border-radius:24px;
      box-shadow:0 0 40px rgba(0,255,255,0.6);
    ">
  </iframe>
</div>
    </section><!-- Series Circuits Section -->
    <section id="series" class="section"><iframe 
  src="series-circuit.html"
  width="100%"
  height="1600"
  style="border: none; margin-top: 1rem;"
  title="Series Circuit Simulator">
</iframe>

     <div class="card">
      <div class="card-content">
       <h2>üîó Series Circuits</h2>
       <p style="color: #FFFF00; line-height: 1.8;">In a series circuit, components are connected end-to-end in a single path. Current is the same throughout, but voltage divides among components.</p>
       <h3>Key Properties:</h3>
       <div class="info-box">
        <p style="color: #FFFF00;">‚úì Same current flows through all components</p>
        <p style="color: #FFFF00;">‚úì Total voltage = Sum of individual voltages</p>
        <p style="color: #FFFF00;">‚úì Total resistance = Sum of individual resistances</p>
        <p style="color: #FFFF00;">‚úì If one component fails, the entire circuit breaks</p>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üéÑ Christmas Lights Simulator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Click on bulbs to break them and see how series circuits behave!</p>
       <div class="lights-container">
        <div class="bulb on" id="bulb-0" onclick="toggleBulb(0)">
         <div class="bulb-icon" style="color: #FF0000;">
          üí°
         </div>
         <div class="bulb-label">
          Bulb 1
         </div>
        </div>
        <div class="bulb on" id="bulb-1" onclick="toggleBulb(1)">
         <div class="bulb-icon" style="color: #00FF00;">
          üí°
         </div>
         <div class="bulb-label">
          Bulb 2
         </div>
        </div>
        <div class="bulb on" id="bulb-2" onclick="toggleBulb(2)">
         <div class="bulb-icon" style="color: #0000FF;">
          üí°
         </div>
         <div class="bulb-label">
          Bulb 3
         </div>
        </div>
        <div class="bulb on" id="bulb-3" onclick="toggleBulb(3)">
         <div class="bulb-icon" style="color: #FFFF00;">
          üí°
         </div>
         <div class="bulb-label">
          Bulb 4
         </div>
        </div>
        <div class="bulb on" id="bulb-4" onclick="toggleBulb(4)">
         <div class="bulb-icon" style="color: #FF00FF;">
          üí°
         </div>
         <div class="bulb-label">
          Bulb 5
         </div>
        </div>
       </div>
       <div class="info-box" id="series-message">
        <p style="color: #32CD32; font-weight: bold;">‚úì All lights are working! Current flows through the complete circuit.</p>
       </div><button class="btn" onclick="resetBulbs()">Reset All Bulbs</button>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üî¶ Flashlight Battery Simulator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Add or remove batteries to see how voltage adds up in series!</p>
       <div class="battery-display" id="battery-container">
        <div class="battery">
         <div class="battery-voltage">
          1.5V
         </div> üîã
        </div>
        <div style="color: #FFD700; font-size: 2rem;">
         ‚ûï
        </div>
        <div class="battery">
         <div class="battery-voltage">
          1.5V
         </div> üîã
        </div>
       </div>
       <!-- BATTERY DISPLAY (COPY THIS) -->
<div style="text-align:center; margin-bottom:1rem;">
  <div style="font-size:1.5rem; color:#FFD700;">
    Number of Batteries: <span id="battery-count">2</span>
  </div>
  <div style="font-size:1.2rem; color:#00FFFF;">
    Total Voltage: <span id="total-voltage">3.0</span> V
  </div>
</div>

<div id="battery-container"
     style="display:flex; justify-content:center; align-items:center; gap:0.5rem; margin-bottom:1rem;">
</div>
       <div style="text-align: center; margin: 2rem 0;"><button class="btn" onclick="changeBatteries(-1)">‚ûñ Remove Battery</button> <button class="btn" onclick="changeBatteries(1)">Add Battery</button>
       </div>
       <div class="metrics">
        <div class="metric">
         <div class="metric-label">
          Number of Batteries
         </div>
         <div class="metric-value">
          <span id="battery-count">2</span>
         </div>
        </div>
        <div class="metric">
         <div class="metric-label">
          Total Voltage
         </div>
         <div class="metric-value">
          <span id="total-voltage">3.0</span><span class="metric-unit">V</span>
         </div>
        </div>
       </div>
       <div class="flashlight">
        <svg class="flashlight-svg" width="3600" height="1350" viewBox="0 0 420 160"> <!-- HANDLE -->

<rect x="20" y="60" width="180" height="40" rx="20" fill="#cc0000"/>

<!-- HANDLE GROOVES --> <rect x="40" y="65" width="4" height="30" fill="#444"/> <rect x="55" y="65" width="4" height="30" fill="#444"/> <rect x="70" y="65" width="4" height="30" fill="#444"/> <!-- POWER BUTTON --> <circle cx="110" cy="80" r="10" fill="#c62828"/> <text x="105" y="84" fill="#fff" font-size="8">ON</text> <!-- HEAD RING --> <circle cx="230" cy="80" r="34" fill="#ffcc00"/> <!-- LENS --> <circle cx="230" cy="80" r="26" fill="#f5f5dc"/> <!-- LENS GLOW --> <circle cx="230" cy="80" r="40" fill="rgba(255,255,200,0.15)"/> </svg>
        <div class="beam-container" id="beam-container">
         <svg width="300" height="120" style="position: absolute; top: -20px; left: 0;"><defs>
           <lineargradient id="beamGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#FFD700;stop-opacity:0.6" />
            <stop offset="100%" style="stop-color:#FFD700;stop-opacity:0" />
           </lineargradient>
          </defs> <polygon points="0,100 300,0 300,200" fill="url(#beamGradient)" class="light-beam" id="light-beam" /> 
         </svg>
        </div>
       </div>
       <div class="info-box">
        <p style="color: #FFFF00;">üí° <strong>Did you know?</strong> Most flashlights use 2-4 batteries in series. Each 1.5V battery adds to the total voltage, making the light brighter!</p>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üßÆ Series Circuit Calculator</h2>
       <div class="calculator">
        <div class="input-group"><label for="series-r1">Resistor 1 (  )</label> <input type="number" id="series-r1" placeholder="Enter resistance 1" value="10">
        </div>
        <div class="input-group"><label for="series-r2">Resistor 2 (Œ©)</label> <input type="number" id="series-r2" placeholder="Enter resistance 2" value="20">
        </div>
        <div class="input-group"><label for="series-r3">Resistor 3 (Œ©)</label> <input type="number" id="series-r3" placeholder="Enter resistance 3" value="30">
        </div>
        <div class="input-group"><label for="series-voltage">Total Voltage (V)</label> <input type="number" id="series-voltage" placeholder="Enter voltage" value="12">
        </div><button class="btn" onclick="calculateSeries()">Calculate</button>
        <div id="series-calc-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">Results:</h4>
         <p style="color: #FFFF00;"><strong>Total Resistance:</strong> <span id="series-total-r">0</span>Œ©</p>
         <p style="color: #FFFF00;"><strong>Circuit Current:</strong> <span id="series-current">0</span>A</p>
         <p style="color: #FFFF00;"><strong>Voltage across R1:</strong> <span id="series-v1">0</span>V</p>
         <p style="color: #FFFF00;"><strong>Voltage across R2:</strong> <span id="series-v2">0</span>V</p>
         <p style="color: #FFFF00;"><strong>Voltage across R3:</strong> <span id="series-v3">0</span>V</p>
        </div>
       </div>
      </div>
     </div>
     <!-- ============================= -->
<!-- SERIES CIRCUIT QUIZ (IFRAME) -->
<!-- ============================= -->
<div class="series-quiz-container">
  <h2 class="series-quiz-title">üìù Series Circuit Quiz</h2>

  <iframe 
    src="series-quiz.html"
    width="100%"
    height="900"
    frameborder="0"
    loading="lazy"
    allowfullscreen>
  </iframe>
</div>
    </section><!-- Parallel Circuits Section -->
    <section id="parallel" class="section">
     <div class="card">
      <h2>‚ö° Parallel Circuit Simulator</h2>

<iframe
  src="parallel-circuit-simulator.html"
  style="
    width: 100%;
    height: 100vh;
    border: none;
    border-radius: 16px;
    background: transparent;
  "
  loading="lazy"
></iframe>
      <div class="card-content">
       <h2>üî¨ Interactive Parallel Circuit Simulator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Adjust voltage and resistances to see electrons flow through multiple paths in parallel!</p>
       <div class="simulator">
        <div style="text-align: center; margin-bottom: 1rem;">
         <p style="color: #FFD700; font-size: 1.2rem;">Watch electrons split and flow through independent branches!</p>
        </div>
        <div class="input-group"><label for="parallel-sim-voltage">Voltage: <span id="parallel-sim-voltage-display" style="color: #FFD700;">12</span>V</label> <input type="range" id="parallel-sim-voltage" min="0" max="24" value="12" step="1" oninput="updateParallelSim()">
        </div>
        <div class="input-group"><label for="parallel-sim-r1">Branch 1 Resistance: <span id="parallel-sim-r1-display" style="color: #FFD700;">100</span>Œ©</label> <input type="range" id="parallel-sim-r1" min="10" max="500" value="100" step="10" oninput="updateParallelSim()">
        </div>
        <div class="input-group"><label for="parallel-sim-r2">Branch 2 Resistance: <span id="parallel-sim-r2-display" style="color: #FFD700;">200</span>Œ©</label> <input type="range" id="parallel-sim-r2" min="10" max="500" value="200" step="10" oninput="updateParallelSim()">
        </div>
        <div class="input-group"><label for="parallel-sim-r3">Branch 3 Resistance: <span id="parallel-sim-r3-display" style="color: #FFD700;">300</span>Œ©</label> <input type="range" id="parallel-sim-r3" min="10" max="500" value="300" step="10" oninput="updateParallelSim()">
        </div>
        <div class="circuit-display" id="parallel-circuit-display" style="position: relative; height: 400px; overflow: hidden;">
         <svg width="100%" height="400" style="position: absolute; top: 0; left: 0;"><line x1="10%" y1="50" x2="90%" y2="50" stroke="#FFD700" stroke-width="3" /> <line x1="10%" y1="350" x2="90%" y2="350" stroke="#FFD700" stroke-width="3" /> <rect x="5%" y="150" width="5%" height="100" fill="#8B0000" stroke="#FFD700" stroke-width="2" rx="5" /> <text x="7.5%" y="205" text-anchor="middle" fill="#FFD700" font-size="20" font-weight="bold">
           +
          </text> <line x1="10%" y1="50" x2="10%" y2="150" stroke="#FFD700" stroke-width="3" /> <line x1="10%" y1="250" x2="10%" y2="350" stroke="#FFD700" stroke-width="3" /> <line x1="30%" y1="50" x2="30%" y2="120" stroke="#FF0000" stroke-width="3" /> <rect x="27%" y="120" width="6%" height="40" fill="#8B0000" stroke="#FF0000" stroke-width="2" /> <text x="30%" y="145" text-anchor="middle" fill="#FFD700" font-size="12">
           R1
          </text> <line x1="30%" y1="160" x2="30%" y2="350" stroke="#FF0000" stroke-width="3" /> <text x="30%" y="200" text-anchor="middle" fill="#FFD700" font-size="14" id="parallel-sim-i1-label">
           I‚ÇÅ
          </text> <line x1="50%" y1="50" x2="50%" y2="120" stroke="#00FF00" stroke-width="3" /> <rect x="47%" y="120" width="6%" height="40" fill="#8B0000" stroke="#00FF00" stroke-width="2" /> <text x="50%" y="145" text-anchor="middle" fill="#FFD700" font-size="12">
           R2
          </text> <line x1="50%" y1="160" x2="50%" y2="350" stroke="#00FF00" stroke-width="3" /> <text x="50%" y="200" text-anchor="middle" fill="#FFD700" font-size="14" id="parallel-sim-i2-label">
           I‚ÇÇ
          </text> <line x1="70%" y1="50" x2="70%" y2="120" stroke="#00FFFF" stroke-width="3" /> <rect x="67%" y="120" width="6%" height="40" fill="#8B0000" stroke="#00FFFF" stroke-width="2" /> <text x="70%" y="145" text-anchor="middle" fill="#FFD700" font-size="12">
           R3
          </text> <line x1="70%" y1="160" x2="70%" y2="350" stroke="#00FFFF" stroke-width="3" /> <text x="70%" y="200" text-anchor="middle" fill="#FFD700" font-size="14" id="parallel-sim-i3-label">
           I‚ÇÉ
          </text>
         </svg>
         <div class="parallel-electron parallel-electron-1" data-branch="1" style="background: #FF0000;"></div>
         <div class="parallel-electron parallel-electron-1" data-branch="1" style="background: #FF0000; animation-delay: 1.3s;"></div>
         <div class="parallel-electron parallel-electron-1" data-branch="1" style="background: #FF0000; animation-delay: 2.6s;"></div>
         <div class="parallel-electron parallel-electron-2" data-branch="2" style="background: #00FF00;"></div>
         <div class="parallel-electron parallel-electron-2" data-branch="2" style="background: #00FF00; animation-delay: 1.3s;"></div>
         <div class="parallel-electron parallel-electron-2" data-branch="2" style="background: #00FF00; animation-delay: 2.6s;"></div>
         <div class="parallel-electron parallel-electron-3" data-branch="3" style="background: #00FFFF;"></div>
         <div class="parallel-electron parallel-electron-3" data-branch="3" style="background: #00FFFF; animation-delay: 1.3s;"></div>
         <div class="parallel-electron parallel-electron-3" data-branch="3" style="background: #00FFFF; animation-delay: 2.6s;"></div>
        </div>
        <div class="metrics">
         <div class="metric">
          <div class="metric-label">
           Voltage (All Branches)
          </div>
          <div class="metric-value">
           <span id="parallel-sim-v-value">12</span><span class="metric-unit">V</span>
          </div>
         </div>
         <div class="metric">
          <div class="metric-label">
           Current Branch 1
          </div>
          <div class="metric-value">
           <span id="parallel-sim-i1">0.12</span><span class="metric-unit">A</span>
          </div>
         </div>
         <div class="metric">
          <div class="metric-label">
           Current Branch 2
          </div>
          <div class="metric-value">
           <span id="parallel-sim-i2">0.06</span><span class="metric-unit">A</span>
          </div>
         </div>
         <div class="metric">
          <div class="metric-label">
           Current Branch 3
          </div>
          <div class="metric-value">
           <span id="parallel-sim-i3">0.04</span><span class="metric-unit">A</span>
          </div>
         </div>
         <div class="metric">
          <div class="metric-label">
           Total Current
          </div>
          <div class="metric-value">
           <span id="parallel-sim-total-i">0.22</span><span class="metric-unit">A</span>
          </div>
         </div>
        </div>
        <div class="info-box success" style="margin-top: 1rem;">
         <p style="color: #32CD32; font-weight: bold; margin-bottom: 0.5rem;">‚úÖ Notice:</p>
         <p style="color: #FFFF00; line-height: 1.8;">‚Ä¢ All branches get the SAME voltage<br>
           ‚Ä¢ Lower resistance = MORE current (electrons flow faster)<br>
           ‚Ä¢ Total current = Sum of all branch currents<br>
           ‚Ä¢ Each path works independently!</p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üîÄ Parallel Circuits</h2>
       <p style="color: #FFFF00; line-height: 1.8; margin-bottom: 2rem;">In a parallel circuit, components are connected across common points, creating multiple paths for current. Each branch operates independently!</p>
       <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
        <div class="info-box" style="background: rgba(184, 134, 11, 0.3);">
         <h4 style="color: #FFD700; margin-bottom: 0.5rem;">Total Resistance</h4>
         <p style="color: #FFFF00; font-size: 1.3rem; font-weight: bold; text-align: center;">1/R<sub>total</sub> = 1/R‚ÇÅ + 1/R‚ÇÇ + 1/R‚ÇÉ</p>
        </div>
        <div class="info-box" style="background: rgba(184, 134, 11, 0.3);">
         <h4 style="color: #FFD700; margin-bottom: 0.5rem;">Voltage (Same)</h4>
         <p style="color: #FFFF00; font-size: 1.3rem; font-weight: bold; text-align: center;">V = V‚ÇÅ = V‚ÇÇ = V  </p>
        </div>
        <div class="info-box" style="background: rgba(184, 134, 11, 0.3);">
         <h4 style="color: #FFD700; margin-bottom: 0.5rem;">Current (Sum)</h4>
         <p style="color: #FFFF00; font-size: 1.3rem; font-weight: bold; text-align: center;">I = I‚ÇÅ + I‚ÇÇ + I‚ÇÉ</p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üßÆ Parallel Circuit Calculator</h2>
       <div class="calculator">
        <div class="input-group"><label for="parallel-voltage">Voltage (V)</label> <input type="number" id="parallel-voltage" placeholder="Enter voltage" value="12">
        </div>
        <div class="input-group"><label for="parallel-r1">R1 (Œ©)</label> <input type="number" id="parallel-r1" placeholder="Enter resistance 1" value="6">
        </div>
        <div class="input-group"><label for="parallel-r2">R2 (Œ©)</label> <input type="number" id="parallel-r2" placeholder="Enter resistance 2" value="12">
        </div>
        <div class="input-group"><label for="parallel-r3">R3 (Œ©)</label> <input type="number" id="parallel-r3" placeholder="Enter resistance 3" value="18">
        </div><button class="btn" onclick="calculateParallel()">Calculate</button>
        <div id="parallel-calc-result" style="margin-top: 1.5rem; padding: 1.5rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">Results:</h4>
         <div style="display: grid; gap: 0.8rem;">
          <p style="color: #FFFF00;"><strong>R<sub>total</sub>:</strong> <span id="parallel-rtotal" style="color: #FFD700; font-size: 1.2rem;">--</span></p>
          <p style="color: #FFFF00;"><strong>I<sub>total</sub>:</strong> <span id="parallel-itotal" style="color: #FFD700; font-size: 1.2rem;">--</span></p>
          <p style="color: #FFFF00;"><strong>I‚ÇÅ:</strong> <span id="parallel-i1-calc" style="color: #FFD700; font-size: 1.2rem;">--</span></p>
          <p style="color: #FFFF00;"><strong>I‚ÇÇ:</strong> <span id="parallel-i2-calc" style="color: #FFD700; font-size: 1.2rem;">--</span></p>
          <p style="color: #FFFF00;"><strong>I‚ÇÉ:</strong> <span id="parallel-i3-calc" style="color: #FFD700; font-size: 1.2rem;">--</span></p>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üéÑ Modern Christmas Lights (Parallel)</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Click bulbs to turn them off - others stay lit because they're wired in parallel!</p>
       <div style="background: rgba(0, 0, 0, 0.4); border: 2px solid #B8860B; border-radius: 10px; padding: 2rem; margin: 1rem 0;">
        <div class="lights-container">
         <div class="bulb on" id="parallel-bulb-0" onclick="toggleParallelBulb(0)" style="cursor: pointer;">
          <div class="bulb-icon" style="color: #FF0000;">
           üí°
          </div>
          <div class="bulb-label">
           RED
          </div>
         </div>
         <div class="bulb on" id="parallel-bulb-1" onclick="toggleParallelBulb(1)" style="cursor: pointer;">
          <div class="bulb-icon" style="color: #00FF00;">
           üí°
          </div>
          <div class="bulb-label">
           GREEN
          </div>
         </div>
         <div class="bulb on" id="parallel-bulb-2" onclick="toggleParallelBulb(2)" style="cursor: pointer;">
          <div class="bulb-icon" style="color: #0000FF;">
           üí°
          </div>
          <div class="bulb-label">
           BLUE
          </div>
         </div>
         <div class="bulb on" id="parallel-bulb-3" onclick="toggleParallelBulb(3)" style="cursor: pointer;">
          <div class="bulb-icon" style="color: #FFFF00;">
           üí°
          </div>
          <div class="bulb-label">
           YELLOW
          </div>
         </div>
         <div class="bulb on" id="parallel-bulb-4" onclick="toggleParallelBulb(4)" style="cursor: pointer;">
          <div class="bulb-icon" style="color: #FF00FF;">
           üí°
          </div>
          <div class="bulb-label">
           PURPLE
          </div>
         </div>
        </div>
        <div class="info-box success" id="parallel-lights-message" style="margin-top: 1rem;">
         <p style="color: #32CD32; font-weight: bold;">‚ú® All lights glowing! Click individual bulbs to turn them off - others stay lit (parallel advantage)!</p>
        </div><button class="btn" onclick="resetParallelLights()" style="margin-top: 1rem;">üîÑ Reset All Lights</button>
       </div>
       <div class="info-box success" style="margin-top: 1rem;">
        <p style="color: #32CD32; font-weight: bold; margin-bottom: 0.5rem;">‚úÖ The Parallel Advantage:</p>
        <p style="color: #FFFF00; line-height: 1.8;">In parallel circuits, each component has its own independent path. If ONE bulb fails, the others keep working! This is why modern Christmas lights are so much better than old series lights.</p>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üè† Home Appliances (Parallel Connection)</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Click on each appliance to turn it ON or OFF. Notice how each device works independently!</p>
       <div class="appliance-grid">
        <div class="appliance" id="appliance-0" onclick="toggleAppliance(0)">
         <div class="appliance-icon">
          üí°
         </div>
         <div style="color: #FFD700; font-weight: bold; margin: 0.5rem 0;">
          Light Bulb
         </div>
         <div style="color: #FFFF00; font-size: 0.9rem;">
          60W
         </div>
        </div>
        <div class="appliance" id="appliance-1" onclick="toggleAppliance(1)">
         <div class="appliance-icon">
          üì∫
         </div>
         <div style="color: #FFD700; font-weight: bold; margin: 0.5rem 0;">
          TV
         </div>
         <div style="color: #FFFF00; font-size: 0.9rem;">
          150W
         </div>
        </div>
        <div class="appliance" id="appliance-2" onclick="toggleAppliance(2)">
         <div class="appliance-icon">
          ‚ùÑÔ∏è
         </div>
         <div style="color: #FFD700; font-weight: bold; margin: 0.5rem 0;">
          Refrigerator
         </div>
         <div style="color: #FFFF00; font-size: 0.9rem;">
          200W
         </div>
        </div>
        <div class="appliance" id="appliance-3" onclick="toggleAppliance(3)">
         <div class="appliance-icon">
          üíª
         </div>
         <div style="color: #FFD700; font-weight: bold; margin: 0.5rem 0;">
          Computer
         </div>
         <div style="color: #FFFF00; font-size: 0.9rem;">
          300W
         </div>
        </div>
       </div>
       <div class="metrics" style="margin-top: 1.5rem;">
        <div class="metric">
         <div class="metric-label">
          Active Appliances
         </div>
         <div class="metric-value">
          <span id="active-count">0</span>
         </div>
        </div>
        <div class="metric">
         <div class="metric-label">
          Total Power Draw
         </div>
         <div class="metric-value">
          <span id="total-power">0</span><span class="metric-unit">W</span>
         </div>
        </div>
        <div class="metric">
         <div class="metric-label">
          Total Current
         </div>
         <div class="metric-value">
          <span id="total-current">0.00</span><span class="metric-unit">A</span>
         </div>
        </div>
       </div><button class="toggle-btn" onclick="toggleExplanation('home-appliance-exp')">üëÅÔ∏è Show/Hide Explanation</button>
       <div id="home-appliance-exp" class="solution">
        <p style="color: #FFFF00; line-height: 1.8;"><strong>Why this works:</strong><br>
          ‚Ä¢ All appliances receive full voltage (220V)<br>
          ‚Ä¢ Each device draws current independently<br>
          ‚Ä¢ Turning one OFF doesn't affect others<br>
          ‚Ä¢ This is exactly how your home electrical system works!</p>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>   Comprehensive Discussion</h2>
       <h3>üîÄ What is a Parallel Circuit?</h3><button class="toggle-btn" onclick="toggleExplanation('parallel-def')">üëÅÔ∏è Show/Hide Explanation</button>
       <div id="parallel-def" class="solution">
        <p style="color: #FFFF00; line-height: 1.8;">A parallel circuit is an electrical circuit where components are connected across common points, creating multiple independent paths for current to flow. Unlike series circuits where there's only one path, parallel circuits offer several routes for electricity to travel from the power source back to itself.</p>
       </div>
       <h3 style="margin-top: 2rem;">‚ö° Voltage in Parallel Circuits</h3><button class="toggle-btn" onclick="toggleExplanation('parallel-voltage')">üëÅÔ∏è Show/Hide Explanation</button>
       <div id="parallel-voltage" class="solution">
        <p style="color: #FFFF00; line-height: 1.8;">In parallel circuits, voltage is the SAME across all branches. Every component receives the full source voltage regardless of what other components are doing. This is why every outlet in your home provides the same 120V (or 220V), whether you have one device plugged in or ten! <br><br><strong style="font-size: 1.2rem;">V = V‚ÇÅ = V‚ÇÇ = V‚ÇÉ = ...</strong></p>
       </div>
       <h3 style="margin-top: 2rem;">üåä Current in Parallel Circuits</h3><button class="toggle-btn" onclick="toggleExplanation('parallel-current')">üëÅÔ∏è Show/Hide Explanation</button>
       <div id="parallel-current" class="solution">
        <p style="color: #FFFF00; line-height: 1.8;">Current in parallel circuits DIVIDES among the branches. The total current from the source equals the sum of currents through each branch. Current naturally flows more through paths with lower resistance (easier paths). <br><br><strong style="font-size: 1.2rem;">I<sub>total</sub> = I‚ÇÅ + I‚ÇÇ + I‚ÇÉ + ...</strong> <br><br>
          Think of it like water flowing through multiple pipes - more water flows through wider pipes (lower resistance), but all the water adds up at the end!</p>
       </div>
       <h3 style="margin-top: 2rem;">    Resistance in Parallel Circuits</h3><button class="toggle-btn" onclick="toggleExplanation('parallel-resistance')">üëÅÔ∏è Show/Hide Explanation</button>
       <div id="parallel-resistance" class="solution">
        <p style="color: #FFFF00; line-height: 1.8;">Total resistance in parallel circuits DECREASES as you add more branches. Adding parallel paths gives current more routes to flow, making it easier for electricity to pass through the circuit. This is counterintuitive but crucial! <br><br><strong style="font-size: 1.2rem;">1/R<sub>total</sub> = 1/R‚ÇÅ + 1/R‚ÇÇ + 1/R‚ÇÉ + ...</strong> <br><br>
          The total resistance will ALWAYS be less than the smallest individual resistance. For example, if you have 10Œ© and 20Œ© in parallel, total resistance is about 6.67Œ© - less than either one!</p>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>‚öîÔ∏è Series vs Parallel Comparison</h2>
       <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
         <thead>
          <tr style="background: rgba(184, 134, 11, 0.3); border: 2px solid #B8860B;">
           <th style="padding: 1rem; color: #FFD700; border: 1px solid #B8860B;">Property</th>
           <th style="padding: 1rem; color: #FFD700; border: 1px solid #B8860B;">üîó Series</th>
           <th style="padding: 1rem; color: #FFD700; border: 1px solid #B8860B;">üîÄ Parallel</th>
          </tr>
         </thead>
         <tbody>
          <tr style="background: rgba(139, 0, 0, 0.3);">
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;"><strong>Current Flow</strong></td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Same through all<br>
            (I = I‚ÇÅ = I‚ÇÇ)</td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Divides among branches<br>
            (I = I‚ÇÅ + I‚ÇÇ)</td>
          </tr>
          <tr style="background: rgba(139, 0, 0, 0.2);">
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;"><strong>Voltage</strong></td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Divides across components<br>
            (V = V‚ÇÅ + V‚ÇÇ)</td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Same across all<br>
            (V = V‚ÇÅ = V‚ÇÇ)</td>
          </tr>
          <tr style="background: rgba(139, 0, 0, 0.3);">
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;"><strong>Total Resistance</strong></td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Adds up<br>
            (R<sub>total</sub> = R‚ÇÅ + R‚ÇÇ) ‚¨ÜÔ∏è</td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Decreases<br>
            (1/R<sub>total</sub> = 1/R‚ÇÅ + 1/R‚ÇÇ) ‚¨áÔ∏è</td>
          </tr>
          <tr style="background: rgba(139, 0, 0, 0.2);">
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;"><strong>If One Breaks</strong></td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">‚ùå Entire circuit stops</td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">‚úÖ Other branches continue</td>
          </tr>
          <tr style="background: rgba(139, 0, 0, 0.3);">
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;"><strong>Number of Paths</strong></td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Single path only</td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Multiple independent paths</td>
          </tr>
          <tr style="background: rgba(139, 0, 0, 0.2);">
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;"><strong>Common Uses</strong></td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Battery stacks, voltage dividers</td>
           <td style="padding: 1rem; color: #FFFF00; border: 1px solid #B8860B;">Home wiring, car systems</td>
          </tr>
         </tbody>
        </table>
        <h3>Discussion Questions</h3>
        <ol style="margin-bottom: 1.2rem; color: #e0e0ff;">
          <li>What happens to the total resistance in a series circuit if you add more resistors? What about in a parallel circuit?</li>
          <li>Why does a single burned-out bulb cause all lights to go out in a series string, but not in a parallel arrangement?</li>
          <li>How does increasing the voltage affect the current in both series and parallel circuits, assuming resistance stays the same?</li>
          <li>In a parallel circuit, why does the branch with the lowest resistance have the highest current?</li>
          <li>How would you design a circuit to ensure that if one device fails, the others keep working? Explain your reasoning.</li>
        </ol>
        <h3>Try This Activity</h3>
        <p style="color: #00ff88;">Use the simulator above to adjust the voltage and resistance values. Observe how the current changes as you:
          <ul>
            <li>Increase the voltage while keeping resistance constant.</li>
            <li>Increase the resistance while keeping voltage constant.</li>
            <li>Try different combinations and predict the current before checking the result.</li>
          </ul>
          Record your observations and explain the relationship between voltage, resistance, and current in your own words.
        </p>
      </div>
      <!-- ============================= -->
<!-- PARALLEL CIRCUIT QUIZ -->
<!-- ============================= -->
<div class="series-quiz-container">
  <h2 class="series-quiz-title">üîÄ Parallel Circuit Quiz</h2>

  <iframe
    src="parallel-quiz.html"
    width="100%"
    height="850"
    loading="lazy"
    allowfullscreen>
  </iframe>
</div>
    </section>
    <!-- End Series and Parallel Circuits Section -->
    
    <!-- Power Section -->
    <section id="power" class="section">
     <div class="card power-full">
      <div class="card-content">
        <!-- ‚ö° Power & Energy Simulator (IFRAMED) -->
<div class="card" style="margin-top: 3rem;">
  <h2 style="color:#00d4ff; text-align:center;">
    ‚ö° Power & Energy & Cost Simulator
  </h2>

  <iframe
  src="power-energy-simulator.html"
  style="
    width: 100%;
    height: 70vh;
    min-height: 1200px;
    border: none;
    border-radius: 16px;
    overflow: hidden;
  ">
</iframe>
</div>
       <h2>‚ö° Energy &amp; Power</h2>
       <h3>Definitions</h3>
       <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin: 2rem 0;">
        <div class="info-box">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">‚ö° Power (P)</h4>
         <p style="color: #FFFF00; line-height: 1.8;">Rate of energy use or consumption<br><br><strong style="font-size: 1.3rem;">P = V √ó I</strong><br><br>
           Measured in Watts (W)</p>
        </div>
        <div class="info-box">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">‚è±Ô∏è Energy (E)</h4>
         <p style="color: #FFFF00; line-height: 1.8;">Total power consumed over time<br><br><strong style="font-size: 1.3rem;">E = P √ó t</strong><br><br>
           Measured in kWh or Wh</p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üßÆ Power Calculator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Enter any 2 values to calculate power:</p>
       <div class="calculator">
        <div class="input-group"><label for="power-calc-power">Power (W)</label> <input type="number" id="power-calc-power" placeholder="Power" oninput="calculatePowerAny()">
        </div>
        <div class="input-group"><label for="power-calc-voltage">Voltage (V)</label> <input type="number" id="power-calc-voltage" placeholder="Voltage" oninput="calculatePowerAny()">
        </div>
        <div class="input-group"><label for="power-calc-current">Current (A)</label> <input type="number" id="power-calc-current" placeholder="Current" oninput="calculatePowerAny()">
        </div><button class="btn" onclick="calculatePowerAny()">‚ö° Calculate</button> <button class="btn btn-secondary" onclick="clearPowerCalc()">üóëÔ∏è Clear</button>
        <div id="power-calc-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <p style="color: #FFD700; font-weight: bold; margin-bottom: 0.5rem;">Result:</p>
         <p id="power-calc-answer" style="color: #FFFF00; font-size: 1.2rem;"></p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üßÆ Energy Calculator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Enter any 2 values to calculate energy:</p>
       <div class="calculator">
        <div class="input-group"><label for="energy-calc-energy">Energy (kWh)</label> <input type="number" id="energy-calc-energy" placeholder="Energy" oninput="calculateEnergyAny()">
        </div>
        <div class="input-group"><label for="energy-calc-power">Power (W)</label> <input type="number" id="energy-calc-power" placeholder="Power" oninput="calculateEnergyAny()">
        </div>
        <div class="input-group"><label for="energy-calc-time">Time (hours)</label> <input type="number" id="energy-calc-time" placeholder="Time" oninput="calculateEnergyAny()">
        </div><button class="btn" onclick="calculateEnergyAny()">‚ö° Calculate</button> <button class="btn btn-secondary" onclick="clearEnergyCalc()">üóëÔ∏è Clear</button>
        <div id="energy-calc-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <p style="color: #FFD700; font-weight: bold; margin-bottom: 0.5rem;">Result:</p>
         <p id="energy-calc-answer" style="color: #FFFF00; font-size: 1.2rem;"></p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üí∞ Philippine Electricity Cost Calculator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Calculate your daily electricity cost for any appliance. Change values to see real-time updates.</p>
       <div class="calculator">
        <!-- Editable inputs: power (W), hours (h), rate (‚Ç±/kWh) -->
        <div class="input-group"><label for="cost-appliance-name">Appliance Name</label> <input type="text" id="cost-appliance-name" placeholder="Air Conditioner" value="Air Conditioner" oninput="calculateCost()">
        </div>
        <div class="input-group"><label for="cost-power">Power Rating (Watts)</label> <input type="number" id="cost-power" placeholder="Enter power" value="1200" oninput="calculateCost()"> <small style="color:#00ffff; margin-left:8px;">W</small>
        </div>
        <div class="input-group"><label for="cost-hours">Hours Used Per Day</label> <input type="number" id="cost-hours" placeholder="Enter hours" value="8" step="0.1" oninput="calculateCost()"> <small style="color:#00ffff; margin-left:8px;">hours/day</small>
        </div>
        <div class="input-group"><label for="cost-rate">Rate (‚Ç± per kWh)</label> <input type="number" id="cost-rate" placeholder="Enter rate" value="11.50" step="0.01" oninput="calculateCost()"> <small style="color:#00ffff; margin-left:8px;">‚Ç±/kWh</small>
        </div>
        <div style="display:flex; gap:0.5rem; align-items:center; margin-top:0.5rem;">
          <button class="btn" onclick="calculateCost()">üí∞ Calculate Cost</button>
          <button id="cost-solution-btn" class="btn btn-secondary" onclick="toggleCostSolution()">Show Solution</button>
          <button class="btn btn-secondary" onclick="toggleHowToUse()">How to Use</button>
        </div>

        <!-- Final answers (always numeric, no formula steps) -->
        <div id="cost-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: block;">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">Cost Breakdown:</h4>
         <p style="color: #FFFF00;"><strong>Energy (daily):</strong> <span id="cost-energy">0.00</span> <span style="color:#FFD700;">kWh</span></p>
         <p style="color: #FFFF00;"><strong>Daily Cost:</strong> ‚Ç±<span id="daily-cost">0.00</span></p>
         <p style="color: #FFFF00;"><strong>Monthly Cost:</strong> ‚Ç±<span id="monthly-cost">0.00</span></p>
         <p style="color: #FFFF00;"><strong>Yearly Cost:</strong> ‚Ç±<span id="yearly-cost">0.00</span></p>
        </div>

        <!-- Step-by-step solution (hidden by default) -->
        <div id="cost-solution" class="solution" style="margin-top:1rem; display:none;">
          <h4 style="color:#FFD700; margin-bottom:0.5rem;">Solution Steps</h4>
          <div id="cost-solution-steps" style="color:#FFFF00;"></div>
        </div>

        <!-- How to Use (collapsible) -->
        <div id="cost-howto" class="solution" style="margin-top:1rem; display:none;">
          <h4 style="color:#00FFFF; margin-bottom:0.5rem;">How to Use</h4>
          <p style="color:#FFFF00; line-height:1.6;">1. Enter or choose an appliance name. 2. Adjust <strong>Power (W)</strong> and <strong>Hours/day</strong> using the number inputs. 3. Set the electricity <strong>Rate (‚Ç±/kWh)</strong>. 4. Results update immediately: Energy (kWh) = (Power √ó Time) / 1000. Cost = Energy √ó Rate. 5. Click <strong>Show Solution</strong> to view the calculation steps based on the current values.</p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üè† Household Energy Manager</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Turn appliances on/off and adjust usage hours to see your total electricity cost!</p>
       <div style="text-align: center; margin-bottom: 2rem;">
        <p style="color: #FFD700; font-size: 1.2rem; font-weight: bold;">Electricity Rate: ‚Ç±<span id="household-rate">11.50</span>/kWh</p>
       </div>
       <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
        <div style="background: rgba(0, 0, 0, 0.4); border: 2px solid #B8860B; border-radius: 10px; padding: 1.5rem;">
         <div style="text-align: center; font-size: 3rem; margin-bottom: 0.5rem;">
          ‚ùÑÔ∏è
         </div>
         <h4 style="color: #FFD700; text-align: center; margin-bottom: 1rem;">Air Conditioner (1200W)</h4>
         <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem;"><button class="btn btn-secondary" onclick="toggleHouseholdAppliance(0, false)" style="padding: 0.5rem 1rem;">OFF</button> <button class="btn" onclick="toggleHouseholdAppliance(0, true)" style="padding: 0.5rem 1rem;">ON</button>
         </div>
         <div class="input-group"><label for="hours-0" style="font-size: 0.9rem;">Hours/day: <span id="hours-display-0" style="color: #FFD700;">8</span></label> <input type="range" id="hours-0" min="0" max="24" value="8" step="0.5" oninput="updateHouseholdHours(0)">
         </div>
        </div>
        <div class="household-card" style="background: rgba(0, 0, 0, 0.4); border: 2px solid #B8860B; border-radius: 10px; padding: 1.5rem;">
         <div style="text-align: center; font-size: 3rem; margin-bottom: 0.5rem;">
          üßä
         </div>
         <h4 style="color: #FFD700; text-align: center; margin-bottom: 1rem;">Refrigerator (200W)</h4>
         <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem;"><button class="btn btn-secondary" onclick="toggleHouseholdAppliance(1, false)" style="padding: 0.5rem 1rem;">OFF</button> <button class="btn" onclick="toggleHouseholdAppliance(1, true)" style="padding: 0.5rem 1rem;">ON</button>
         </div>
         <div class="input-group"><label for="hours-1" style="font-size: 0.9rem;">Hours/day: <span id="hours-display-1" style="color: #FFD700;">24</span></label> <input type="range" id="hours-1" min="0" max="24" value="24" step="0.5" oninput="updateHouseholdHours(1)">
         </div>
        </div>
        <div class="household-card" style="background: rgba(0, 0, 0, 0.4); border: 2px solid #B8860B; border-radius: 10px; padding: 1.5rem;">
         <div style="text-align: center; font-size: 3rem; margin-bottom: 0.5rem;">
          üì∫
         </div>
         <h4 style="color: #FFD700; text-align: center; margin-bottom: 1rem;">Television (100W)</h4>
         <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem;"><button class="btn btn-secondary" onclick="toggleHouseholdAppliance(2, false)" style="padding: 0.5rem 1rem;">OFF</button> <button class="btn" onclick="toggleHouseholdAppliance(2, true)" style="padding: 0.5rem 1rem;">ON</button>
         </div>
         <div class="input-group"><label for="hours-2" style="font-size: 0.9rem;">Hours/day: <span id="hours-display-2" style="color: #FFD700;">6</span></label> <input type="range" id="hours-2" min="0" max="24" value="6" step="0.5" oninput="updateHouseholdHours(2)">
         </div>
        </div>
        <div class="household-card" style="background: rgba(0, 0, 0, 0.4); border: 2px solid #B8860B; border-radius: 10px; padding: 1.5rem;">
         <div style="text-align: center; font-size: 3rem; margin-bottom: 0.5rem;">
          üåÄ
         </div>
         <h4 style="color: #FFD700; text-align: center; margin-bottom: 1rem;">Electric Fan (60W)</h4>
         <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem;"><button class="btn btn-secondary" onclick="toggleHouseholdAppliance(3, false)" style="padding: 0.5rem 1rem;">OFF</button> <button class="btn" onclick="toggleHouseholdAppliance(3, true)" style="padding: 0.5rem 1rem;">ON</button>
         </div>
         <div class="input-group"><label for="hours-3" style="font-size: 0.9rem;">Hours/day: <span id="hours-display-3" style="color: #FFD700;">12</span></label> <input type="range" id="hours-3" min="0" max="24" value="12" step="0.5" oninput="updateHouseholdHours(3)">
         </div>
        </div>
        <div class="household-card" style="background: rgba(0, 0, 0, 0.4); border: 2px solid #B8860B; border-radius: 10px; padding: 1.5rem;">
         <div style="text-align: center; font-size: 3rem; margin-bottom: 0.5rem;">
          üí°
         </div>
         <h4 style="color: #FFD700; text-align: center; margin-bottom: 1rem;">LED Lights (50W)</h4>
         <div style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem;"><button class="btn btn-secondary" onclick="toggleHouseholdAppliance(4, false)" style="padding: 0.5rem 1rem;">OFF</button> <button class="btn" onclick="toggleHouseholdAppliance(4, true)" style="padding: 0.5rem 1rem;">ON</button>
         </div>
         <div class="input-group"><label for="hours-4" style="font-size: 0.9rem;">Hours/day: <span id="hours-display-4" style="color: #FFD700;">5</span></label> <input type="range" id="hours-4" min="0" max="24" value="5" step="0.5" oninput="updateHouseholdHours(4)">
         </div>
        </div>
       </div>
       <div class="household-card" style="background: rgba(184, 134, 11, 0.2); border: 3px solid #FFD700; margin-top: 2rem;">
        <div class="card-content">
         <h3 style="text-align: center; color: #FFD700; margin-bottom: 1.5rem;">üí∞ Total Electricity Cost</h3>
         <div class="metrics">
          <div class="metric">
           <div class="metric-label">
            Daily Cost
           </div>
           <div class="metric-value">
            ‚Ç±<span id="household-daily">0.00</span>
           </div>
          </div>
          <div class="metric">
           <div class="metric-label">
            Monthly Cost
           </div>
           <div class="metric-value">
            ‚Ç±<span id="household-monthly">0.00</span>
           </div>
          </div>
          <div class="metric">
           <div class="metric-label">
            Yearly Cost
           </div>
           <div class="metric-value">
            ‚Ç±<span id="household-yearly">0.00</span>
           </div>
          </div>
         </div>
         <p style="text-align: center; color: #FFFF00; margin-top: 1rem; font-size: 1.1rem;">Total Energy: <span id="household-energy" style="color: #FFD700; font-weight: bold;">0.00</span> kWh/day</p>
        </div>
       </div>
      </div>
     </div>
    </section><!-- Practical Applications Section -->
    <section id="practical" class="section">
     <div class="card">
      <div class="card-content">
       <h2>üîß Practical Applications</h2>
       <p style="color: #FFFF00; line-height: 1.8;">Let's explore real-world electrical systems and learn how to design battery banks, analyze automotive circuits, and calculate solar panel requirements!</p>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üîã Battery Bank Calculator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Design a battery bank for solar systems or backup power!</p>
       <div class="calculator">
        <div class="input-group"><label for="bb-config">Configuration</label> <select id="bb-config"> <option value="series">Series (Voltage adds up)</option> <option value="parallel">Parallel (Capacity adds up)</option> <option value="both">Series-Parallel (Both add up)</option> </select>
        </div>
        <div class="input-group"><label for="bb-voltage">Single Battery Voltage (V)</label> <input type="number" id="bb-voltage" value="12" placeholder="Enter voltage">
        </div>
        <div class="input-group"><label for="bb-capacity">Single Battery Capacity (Ah)</label> <input type="number" id="bb-capacity" value="100" placeholder="Enter capacity">
        </div>
        <div class="input-group"><label for="bb-series-count">Batteries in Series</label> <input type="number" id="bb-series-count" value="2" min="1" placeholder="Series count">
        </div>
        <div class="input-group"><label for="bb-parallel-count">Batteries in Parallel</label> <input type="number" id="bb-parallel-count" value="2" min="1" placeholder="Parallel count">
        </div><button class="btn" onclick="calculateBatteryBank()">Calculate</button>
        <div id="bb-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">Battery Bank Specifications:</h4>
         <p style="color: #FFFF00;"><strong>Total Voltage:</strong> <span id="bb-total-voltage">0</span>V</p>
         <p style="color: #FFFF00;"><strong>Total Capacity:</strong> <span id="bb-total-capacity">0</span>Ah</p>
         <p style="color: #FFFF00;"><strong>Total Batteries:</strong> <span id="bb-total-batteries">0</span></p>
         <p style="color: #FFFF00;"><strong>Energy Storage:</strong> <span id="bb-energy">0</span>Wh</p>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>üöó Automotive Circuit Analyzer</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Analyze typical car electrical components!</p>
       <div class="calculator">
        <div class="input-group"><label for="auto-component">Select Component</label> <select id="auto-component" onchange="updateAutoComponent()"> <option value="headlight">Headlight (55W)</option> <option value="starter">Starter Motor (1500W)</option> <option value="radio">Radio (20W)</option> <option value="ac">Air Conditioner (500W)</option> <option value="custom">Custom</option> </select>
        </div>
        <div class="input-group"><label for="auto-power">Power (W)</label> <input type="number" id="auto-power" value="55" placeholder="Enter power">
        </div>
        <div class="input-group"><label for="auto-voltage">Car Battery Voltage (V)</label> <input type="number" id="auto-voltage" value="12" placeholder="Enter voltage">
        </div><button class="btn" onclick="calculateAuto()">Analyze</button>
        <div id="auto-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">Component Analysis:</h4>
         <p style="color: #FFFF00;"><strong>Current Draw:</strong> <span id="auto-current">0</span>A</p>
         <p style="color: #FFFF00;"><strong>Resistance:</strong> <span id="auto-resistance">0</span>Œ©</p>
         <p style="color: #FFFF00;"><strong>Recommended Fuse:</strong> <span id="auto-fuse">0</span>A</p>
         <div class="info-box warning" id="auto-warning" style="margin-top: 1rem; display: none;">
          <p style="color: #FF4500; font-weight: bold;">‚ö†Ô∏è High current draw! Ensure proper wiring gauge.</p>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="card">
      <div class="card-content">
       <h2>‚òÄÔ∏è Solar Panel System Calculator</h2>
       <p style="color: #FFFF00; margin-bottom: 1rem;">Calculate your solar panel requirements!</p>
       <div class="calculator">
        <div class="input-group"><label for="solar-daily-usage">Daily Energy Usage (kWh)</label> <input type="number" id="solar-daily-usage" value="10" placeholder="Enter daily usage" step="0.1">
        </div>
        <div class="input-group"><label for="solar-sun-hours">Peak Sun Hours per Day</label> <input type="number" id="solar-sun-hours" value="5" placeholder="Average: 4-6 hours" step="0.1">
        </div>
        <div class="input-group"><label for="solar-panel-wattage">Single Panel Wattage (W)</label> <input type="number" id="solar-panel-wattage" value="300" placeholder="Enter panel wattage">
        </div>
        <div class="input-group"><label for="solar-efficiency">System Efficiency (%)</label> <input type="number" id="solar-efficiency" value="80" placeholder="Typically 75-85%" min="1" max="100">
        </div><button class="btn" onclick="calculateSolar()">Calculate System</button>
        <div id="solar-result" style="margin-top: 1rem; padding: 1rem; background: rgba(184, 134, 11, 0.2); border: 2px solid #B8860B; border-radius: 8px; display: none;">
         <h4 style="color: #FFD700; margin-bottom: 1rem;">Solar System Requirements:</h4>
         <p style="color: #FFFF00;"><strong>Required System Size:</strong> <span id="solar-system-size">0</span>kW</p>
         <p style="color: #FFFF00;"><strong>Number of Panels:</strong> <span id="solar-panels">0</span> panels</p>
         <p style="color: #FFFF00;"><strong>Total Panel Wattage:</strong> <span id="solar-total-wattage">0</span>W</p>
         <p style="color: #FFFF00;"><strong>Expected Daily Generation:</strong> <span id="solar-generation">0</span>kWh</p>
         <div class="info-box success" style="margin-top: 1rem;">
          <p style="color: #32CD32;">üí° This system can cover your daily energy needs with the given sun hours!</p>
         </div>
        </div>
       </div>
      </div>
     </div>
     
    </section>
   </main>
   <section id="electricCharge" class="section">
  <div class="card">
    <h2>‚ö° Electric Charge</h2>

    <iframe
  src="electric-charge.html"
  style="
    width: 100%;
    height: 150vh;
    border: none;
    border-radius: 16px;
    pointer-events: auto;
    overflow: auto;
    background: transparent;
  ">
</iframe>
  </div>
</section>

<section id="magnetism" class="section">
  <div class="card">
    <h2>üß≤ Magnetism</h2>

    <iframe
      src="simulators/magnetism.html"
      style="
        width: 100%;
        height: 150vh;
        border: none;
        border-radius: 16px;
        pointer-events: auto;
        overflow: auto;
        background: transparent;
      ">
    </iframe>

  </div>
</section>

  <script>
    const defaultConfig = {
      main_title: "‚ö° ELECTRICITY LAB ‚ö°",
      subtitle: "Interactive Electricity Learning Platform",
      welcome_text: "‚ö° Welcome to the Electricity Lab! ‚ö°"
    };

    async function onConfigChange(config) {
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.getElementById('welcome-text').textContent = config.welcome_text || defaultConfig.welcome_text;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["main_title", config.main_title || defaultConfig.main_title],
          ["subtitle", config.subtitle || defaultConfig.subtitle],
          ["welcome_text", config.welcome_text || defaultConfig.welcome_text]
        ])
      });
    }

    // Household Energy Manager (single declaration placed before any functions)
    const householdAppliances = [
      { name: 'Air Conditioner', power: 1200, active: false, hours: 8 },
      { name: 'Refrigerator', power: 200, active: false, hours: 24 },
      { name: 'Television', power: 100, active: false, hours: 6 },
      { name: 'Electric Fan', power: 60, active: false, hours: 12 },
      { name: 'LED Lights', power: 50, active: false, hours: 5 }
    ];

    // Parallel Appliances (declare once and early to avoid TDZ errors)
    const appliances = [
      { name: 'Light Bulb', power: 60, active: false },
      { name: 'TV', power: 150, active: false },
      { name: 'Refrigerator', power: 200, active: false },
      { name: 'Computer', power: 300, active: false }
    ];

    // Navigation
function showSection(sectionId) {

  // üîí LOCK Series Circuits until Ohm's Law Quiz is passed
  if (sectionId === "series") {
    const passed = localStorage.getItem("ohmsPassed");
    const role = localStorage.getItem('role');

    // teachers bypass quiz locks
    if (role !== 'teacher' && passed !== "true") {
      alert("You must pass the Ohm's Law Quiz before accessing Series Circuits.");
      return;
    }
  }

  // üîí LOCK Parallel Circuits until Series is passed
  if (sectionId === "parallel") {
    const seriesPassed = localStorage.getItem('seriesPassed');
    const role = localStorage.getItem('role');
    if (role !== 'teacher' && seriesPassed !== 'true') {
      alert('You must pass the Series Circuits quiz before accessing Parallel Circuits.');
      return;
    }
  }

  // NORMAL NAVIGATION
  const sections = document.querySelectorAll('.section');
  const buttons = document.querySelectorAll('.nav-btn');

  sections.forEach(section => {
    section.classList.remove('active');
  });

  buttons.forEach(button => {
    button.classList.remove('active');
  });

  document.getElementById(sectionId).classList.add('active');
  event.target.classList.add('active');
}

    // Ohm's Law Calculator
    function calculateOhmsLaw() {
      const voltage = parseFloat(document.getElementById('voltage').value);
      const current = parseFloat(document.getElementById('current').value);
      const resistance = parseFloat(document.getElementById('resistance').value);
      
      const resultDiv = document.getElementById('ohms-result');
      const answerDiv = document.getElementById('ohms-answer');
      
      let filledCount = 0;
      if (!isNaN(voltage)) filledCount++;
      if (!isNaN(current)) filledCount++;
      if (!isNaN(resistance)) filledCount++;
      
      if (filledCount < 2) {
        resultDiv.style.display = 'none';
        return;
      }
      
      if (filledCount === 3) {
        answerDiv.textContent = 'Please enter only 2 values!';
        resultDiv.style.display = 'block';
        return;
      }
      
      let result = '';
      
      if (isNaN(voltage)) {
        const v = current * resistance;
        result = `Voltage = ${v.toFixed(2)}V`;
        document.getElementById('voltage').value = v.toFixed(2);
      } else if (isNaN(current)) {
        const i = voltage / resistance;
        result = `Current = ${i.toFixed(2)}A`;
        document.getElementById('current').value = i.toFixed(2);
      } else if (isNaN(resistance)) {
        const r = voltage / current;
        result = `Resistance = ${r.toFixed(2)}Œ©`;
        document.getElementById('resistance').value = r.toFixed(2);
      }
      
      answerDiv.textContent = result;
      resultDiv.style.display = 'block';
    }

    function clearOhmsLaw() {
      document.getElementById('voltage').value = '';
      document.getElementById('current').value = '';
      document.getElementById('resistance').value = '';
      document.getElementById('ohms-result').style.display = 'none';
    }

    // Circuit Simulator
    function updateSimulation() {
      const voltage = parseFloat(document.getElementById('sim-voltage').value);
      const resistance = parseFloat(document.getElementById('sim-resistance').value);
      const current = voltage / resistance;
      
      document.getElementById('sim-voltage-display').textContent = voltage;
      document.getElementById('sim-resistance-display').textContent = resistance;
      document.getElementById('sim-v-value').textContent = voltage;
      document.getElementById('sim-r-value').textContent = resistance;
      document.getElementById('sim-i-value').textContent = current.toFixed(2);
      
      const electron = document.querySelector('.electron');
      const speed = Math.max(0.5, Math.min(5, current * 10));
      electron.style.animationDuration = `${6 / speed}s`;
    }

    // Toggle Solution
    function toggleSolution(id) {
      const solution = document.getElementById(id);
      solution.classList.toggle('show');
    }

    // Toggle Explanation (same as toggleSolution)
    function toggleExplanation(id) {
      const solution = document.getElementById(id);
      solution.classList.toggle('show');
    }

    // Home Devices Simulator
    const homeDevices = [
      { name: 'Living Room Light', power: 60, voltage: 120, active: false },
      { name: 'Bedroom Light', power: 60, voltage: 120, active: false },
      { name: 'Kitchen Light', power: 60, voltage: 120, active: false },
      { name: 'TV Outlet', power: 150, voltage: 120, active: false },
      { name: 'Computer Outlet', power: 300, voltage: 120, active: false },
      { name: 'Microwave Outlet', power: 1000, voltage: 120, active: false }
    ];

    function toggleHomeDevice(index) {
      homeDevices[index].active = !homeDevices[index].active;
      const element = document.getElementById(`home-${index}`);
      
      if (homeDevices[index].active) {
        element.classList.add('active');
      } else {
        element.classList.remove('active');
      }
      
      updateHomeMetrics();
    }

    function updateHomeMetrics() {
      const activeCount = homeDevices.filter(d => d.active).length;
      const totalPower = homeDevices.reduce((sum, d) => sum + (d.active ? d.power : 0), 0);
      const totalCurrent = totalPower / 120;
      
      document.getElementById('home-active').textContent = activeCount;
      document.getElementById('home-power').textContent = totalPower;
      document.getElementById('home-current').textContent = totalCurrent.toFixed(2);
    }

    function resetHomeDevices() {
      homeDevices.forEach((device, index) => {
        device.active = false;
        const element = document.getElementById(`home-${index}`);
        element.classList.remove('active');
      });
      updateHomeMetrics();
    }

    // Car Systems Simulator
    const carSystems = [
      { name: 'Headlights', power: 110, voltage: 12, active: false },
      { name: 'Radio', power: 20, voltage: 12, active: false },
      { name: 'Windshield Wipers', power: 60, voltage: 12, active: false },
      { name: 'AC / Heater Fan', power: 150, voltage: 12, active: false },
      { name: 'Audio Amplifier', power: 500, voltage: 12, active: false },
      { name: 'Interior Lights', power: 10, voltage: 12, active: false }
    ];

    function toggleCarSystem(index) {
      carSystems[index].active = !carSystems[index].active;
      const element = document.getElementById(`car-${index}`);
      
      if (carSystems[index].active) {
        element.classList.add('active');
      } else {
        element.classList.remove('active');
      }
      
      updateCarMetrics();
    }

    function updateCarMetrics() {
      const activeCount = carSystems.filter(s => s.active).length;
      const totalPower = carSystems.reduce((sum, s) => sum + (s.active ? s.power : 0), 0);
      const totalCurrent = totalPower / 12;
      
      document.getElementById('car-active').textContent = activeCount;
      document.getElementById('car-power').textContent = totalPower;
      document.getElementById('car-current').textContent = totalCurrent.toFixed(2);
    }

    function resetCarSystems() {
      carSystems.forEach((system, index) => {
        system.active = false;
        const element = document.getElementById(`car-${index}`);
        element.classList.remove('active');
      });
      updateCarMetrics();
    }

    // Battery Parallel Simulator
    function updateBatteryParallel() {
      const count = parseInt(document.getElementById('battery-parallel-count').value);
      const voltage = parseFloat(document.getElementById('battery-parallel-voltage').value);
      const capacity = parseFloat(document.getElementById('battery-parallel-capacity').value);
      
      document.getElementById('battery-parallel-display').textContent = count;
      
      const totalVoltage = voltage;
      const totalCapacity = capacity * count;
      const totalEnergy = (totalVoltage * totalCapacity) / 1000;
      
      // Update display container
      const container = document.getElementById('battery-parallel-display-container');
      let html = '';
      for (let i = 0; i < count; i++) {
        html += `<div style="text-align: center;">
          <div style="font-size: 3rem;">üîã</div>
          <div style="color: #FFD700; font-size: 0.9rem;">${voltage}V | ${capacity}Ah</div>
        </div>`;
        if (i < count - 1) {
          html += '<div style="font-size: 2rem; color: #FFD700;">||</div>';
        }
      }
      container.innerHTML = html;
      
      document.getElementById('battery-parallel-result-v').textContent = totalVoltage.toFixed(1);
      document.getElementById('battery-parallel-result-ah').textContent = totalCapacity;
      document.getElementById('battery-parallel-runtime').textContent = count;
      document.getElementById('battery-parallel-voltage-total').textContent = totalVoltage.toFixed(1);
      document.getElementById('battery-parallel-capacity-total').textContent = totalCapacity;
      document.getElementById('battery-parallel-energy').textContent = totalEnergy.toFixed(2);
      document.getElementById('battery-parallel-mult').textContent = count;
    }

    // PC Components Simulator
    const pcComponents = [
      { name: 'CPU', power: 150, voltage: 12, active: false },
      { name: 'GPU', power: 300, voltage: 12, active: false },
      { name: 'RAM', power: 20, voltage: 12, active: false },
      { name: 'SSD', power: 5, voltage: 12, active: false },
      { name: 'Fans', power: 15, voltage: 12, active: false },
      { name: 'RGB', power: 10, voltage: 12, active: false }
    ];

    function togglePCComponent(index) {
      pcComponents[index].active = !pcComponents[index].active;
      const element = document.getElementById(`pc-${index}`);
      
      if (pcComponents[index].active) {
        element.classList.add('active');
      } else {
        element.classList.remove('active');
      }
      
      updatePCMetrics();
    }

    function updatePCMetrics() {
      const activeCount = pcComponents.filter(c => c.active).length;
      const totalPower = pcComponents.reduce((sum, c) => sum + (c.active ? c.power : 0), 0);
      const totalCurrent = totalPower / 12;
      
      document.getElementById('pc-active').textContent = activeCount;
      document.getElementById('pc-power').textContent = totalPower;
      document.getElementById('pc-current').textContent = totalCurrent.toFixed(2);
    }

    function resetPCComponents() {
      pcComponents.forEach((component, index) => {
        component.active = false;
        const element = document.getElementById(`pc-${index}`);
        element.classList.remove('active');
      });
      updatePCMetrics();
    }

    // Christmas Lights (Series)
    const bulbStates = [true, true, true, true, true];

    function toggleBulb(index) {
      bulbStates[index] = !bulbStates[index];
      const bulb = document.getElementById(`bulb-${index}`);
      
      if (bulbStates[index]) {
        bulb.classList.remove('off');
        bulb.classList.add('on');
      } else {
        bulb.classList.remove('on');
        bulb.classList.add('off');
      }
      
      updateSeriesMessage();
    }

    function updateSeriesMessage() {
      const allOn = bulbStates.every(state => state);
      const message = document.getElementById('series-message');
      
      if (allOn) {
        message.innerHTML = '<p style="color: #32CD32; font-weight: bold;">‚úì All lights are working! Current flows through the complete circuit.</p>';
        message.className = 'info-box';
      } else {
        message.innerHTML = '<p style="color: #FF4500; font-weight: bold;">‚ùå Circuit broken! In series circuits, if one bulb fails, ALL lights go out.</p>';
        message.className = 'info-box warning';
        
        for (let i = 0; i < bulbStates.length; i++) {
          const bulb = document.getElementById(`bulb-${i}`);
          bulb.classList.remove('on');
          bulb.classList.add('off');
        }
      }
    }

    function resetBulbs() {
      for (let i = 0; i < bulbStates.length; i++) {
        bulbStates[i] = true;
        const bulb = document.getElementById(`bulb-${i}`);
        bulb.classList.remove('off');
        bulb.classList.add('on');
      }
      updateSeriesMessage();
    }

    // Parallel Christmas Lights
    const parallelBulbStates = [true, true, true, true, true];

    function toggleParallelBulb(index) {
      parallelBulbStates[index] = !parallelBulbStates[index];
      const bulb = document.getElementById(`parallel-bulb-${index}`);
      
      if (parallelBulbStates[index]) {
        bulb.classList.remove('off');
        bulb.classList.add('on');
      } else {
        bulb.classList.remove('on');
        bulb.classList.add('off');
      }
      
      updateParallelLightsMessage();
    }

    function updateParallelLightsMessage() {
      const onCount = parallelBulbStates.filter(state => state).length;
      const message = document.getElementById('parallel-lights-message');
      
      if (onCount === 5) {
        message.innerHTML = '<p style="color: #32CD32; font-weight: bold;">‚ú® All lights glowing! Click individual bulbs to turn them off - others stay lit (parallel advantage)!</p>';
      } else if (onCount === 0) {
        message.innerHTML = '<p style="color: #FF4500; font-weight: bold;">üí° All lights are off! Click bulbs to turn them back on independently.</p>';
      } else {
        message.innerHTML = `<p style="color: #FFD700; font-weight: bold;">‚ö° ${onCount} light${onCount === 1 ? '' : 's'} glowing! Notice how the others stay lit - that's parallel power!</p>`;
      }
    }

    function resetParallelLights() {
      for (let i = 0; i < parallelBulbStates.length; i++) {
        parallelBulbStates[i] = true;
        const bulb = document.getElementById(`parallel-bulb-${i}`);
        bulb.classList.remove('off');
        bulb.classList.add('on');
      }
      updateParallelLightsMessage();
    }

    // Battery Flashlight
    let batteryCount = 2;

    function changeBatteries(delta) {
  batteryCount = Math.max(0, Math.min(6, batteryCount + delta));
  updateBatteryDisplay();
  updateDisplay(); // updates flashlight + beam
}

    function updateBatteryDisplay() {
      const container = document.getElementById('battery-container');
      const totalVoltage = batteryCount * 1.5;
      updateFlashlightBeam(totalVoltage);
      
      let html = '';
      for (let i = 0; i < batteryCount; i++) {
        html += `<div class="battery"><div class="battery-voltage">1.5V</div>üîã</div>`;
        if (i < batteryCount - 1) {
          html += '<div style="color: #FFD700; font-size: 2rem;">‚ûï</div>';
        }
      }
      container.innerHTML = html;
      
      document.getElementById('battery-count').textContent = batteryCount;
      document.getElementById('total-voltage').textContent = totalVoltage.toFixed(1);
      
      const brightness = Math.min(1, totalVoltage / 6);
      const beamOpacity = brightness * 0.6;
      document.getElementById('light-beam').setAttribute('opacity', beamOpacity);
    }
    updateBatteryDisplay();
    document.addEventListener('DOMContentLoaded', function () {
  updateBatteryDisplay();
});


    // Series Calculator
    function calculateSeries() {
      const r1 = parseFloat(document.getElementById('series-r1').value);
      const r2 = parseFloat(document.getElementById('series-r2').value);
      const r3 = parseFloat(document.getElementById('series-r3').value);
      const voltage = parseFloat(document.getElementById('series-voltage').value);
      
      if (isNaN(r1) || isNaN(r2) || isNaN(r3) || isNaN(voltage)) {
        return;
      }
      
      const totalR = r1 + r2 + r3;
      const current = voltage / totalR;
      const v1 = current * r1;
      const v2 = current * r2;
      const v3 = current * r3;
      
      document.getElementById('series-total-r').textContent = totalR.toFixed(2) + 'Œ©';
      document.getElementById('series-current').textContent = current.toFixed(3) + 'A';
      document.getElementById('series-v1').textContent = v1.toFixed(2) + 'V';
      document.getElementById('series-v2').textContent = v2.toFixed(2) + 'V';
      document.getElementById('series-v3').textContent = v3.toFixed(2) + 'V';
      document.getElementById('series-calc-result').style.display = 'block';
    }

    // Parallel Appliances (declaration moved earlier)

    function toggleAppliance(index) {
      appliances[index].active = !appliances[index].active;
      const element = document.getElementById(`appliance-${index}`);
      
      if (appliances[index].active) {
        element.classList.add('active');
      } else {
        element.classList.remove('active');
      }
      
      updateApplianceMetrics();
    }

    function updateApplianceMetrics() {
      const activeCount = appliances.filter(a => a.active).length;
      const totalPower = appliances.reduce((sum, a) => sum + (a.active ? a.power : 0), 0);
      const totalCurrent = totalPower / 220;
      
      document.getElementById('active-count').textContent = activeCount;
      document.getElementById('total-power').textContent = totalPower;
      document.getElementById('total-current').textContent = totalCurrent.toFixed(2);
    }

    // Parallel Calculator
    function calculateParallel() {
      const r1 = parseFloat(document.getElementById('parallel-r1').value);
      const r2 = parseFloat(document.getElementById('parallel-r2').value);
      const r3 = parseFloat(document.getElementById('parallel-r3').value);
      const voltage = parseFloat(document.getElementById('parallel-voltage').value);
      
      if (isNaN(r1) || isNaN(r2) || isNaN(r3) || isNaN(voltage)) {
        return;
      }
      
      const totalR = 1 / (1/r1 + 1/r2 + 1/r3);
      const i1 = voltage / r1;
      const i2 = voltage / r2;
      const i3 = voltage / r3;
      const totalCurrent = i1 + i2 + i3;
      
      document.getElementById('parallel-rtotal').textContent = totalR.toFixed(2) + 'Œ©';
      document.getElementById('parallel-itotal').textContent = totalCurrent.toFixed(3) + 'A';
      document.getElementById('parallel-i1-calc').textContent = i1.toFixed(3) + 'A';
      document.getElementById('parallel-i2-calc').textContent = i2.toFixed(3) + 'A';
      document.getElementById('parallel-i3-calc').textContent = i3.toFixed(3) + 'A';
      document.getElementById('parallel-calc-result').style.display = 'block';
    }

    // Parallel Circuit Simulator
    function updateParallelSim() {
      const voltage = parseFloat(document.getElementById('parallel-sim-voltage').value);
      const r1 = parseFloat(document.getElementById('parallel-sim-r1').value);
      const r2 = parseFloat(document.getElementById('parallel-sim-r2').value);
      const r3 = parseFloat(document.getElementById('parallel-sim-r3').value);
      
      document.getElementById('parallel-sim-voltage-display').textContent = voltage;
      document.getElementById('parallel-sim-r1-display').textContent = r1;
      document.getElementById('parallel-sim-r2-display').textContent = r2;
      document.getElementById('parallel-sim-r3-display').textContent = r3;
      
      const i1 = voltage / r1;
      const i2 = voltage / r2;
      const i3 = voltage / r3;
      const totalI = i1 + i2 + i3;
      
      document.getElementById('parallel-sim-v-value').textContent = voltage;
      document.getElementById('parallel-sim-i1').textContent = i1.toFixed(3);
      document.getElementById('parallel-sim-i2').textContent = i2.toFixed(3);
      document.getElementById('parallel-sim-i3').textContent = i3.toFixed(3);
      document.getElementById('parallel-sim-total-i').textContent = totalI.toFixed(3);
      
      document.getElementById('parallel-sim-i1-label').textContent = `I‚ÇÅ: ${i1.toFixed(2)}A`;
      document.getElementById('parallel-sim-i2-label').textContent = `I‚ÇÇ: ${i2.toFixed(2)}A`;
      document.getElementById('parallel-sim-i3-label').textContent = `I‚ÇÉ: ${i3.toFixed(2)}A`;
      
      const electrons1 = document.querySelectorAll('[data-branch="1"]');
      const electrons2 = document.querySelectorAll('[data-branch="2"]');
      const electrons3 = document.querySelectorAll('[data-branch="3"]');
      
      const speed1 = Math.max(0.5, Math.min(2, i1 / 0.1));
      const speed2 = Math.max(0.5, Math.min(2, i2 / 0.1));
      const speed3 = Math.max(0.5, Math.min(2, i3 / 0.1));
      
      electrons1.forEach(e => e.style.animationDuration = `${4 / speed1}s`);
      electrons2.forEach(e => e.style.animationDuration = `${4 / speed2}s`);
      electrons3.forEach(e => e.style.animationDuration = `${4 / speed3}s`);
    }

    // Power Calculator (any 2 values)
    function calculatePowerAny() {
      const power = parseFloat(document.getElementById('power-calc-power').value);
      const voltage = parseFloat(document.getElementById('power-calc-voltage').value);
      const current = parseFloat(document.getElementById('power-calc-current').value);
      
      const resultDiv = document.getElementById('power-calc-result');
      const answerDiv = document.getElementById('power-calc-answer');
      
      let filledCount = 0;
      if (!isNaN(power)) filledCount++;
      if (!isNaN(voltage)) filledCount++;
      if (!isNaN(current)) filledCount++;
      
      if (filledCount < 2) {
        resultDiv.style.display = 'none';
        return;
      }
      
      if (filledCount === 3) {
        answerDiv.textContent = 'Please enter only 2 values!';
        resultDiv.style.display = 'block';
        return;
      }
      
      let result = '';
      
      if (isNaN(power)) {
        const p = voltage * current;
        result = `Power = ${p.toFixed(2)}W`;
        document.getElementById('power-calc-power').value = p.toFixed(2);
      } else if (isNaN(voltage)) {
        const v = power / current;
        result = `Voltage = ${v.toFixed(2)}V`;
        document.getElementById('power-calc-voltage').value = v.toFixed(2);
      } else if (isNaN(current)) {
        const i = power / voltage;
        result = `Current = ${i.toFixed(2)}A`;
        document.getElementById('power-calc-current').value = i.toFixed(2);
      }
      
      answerDiv.textContent = result;
      resultDiv.style.display = 'block';
    }

    function clearPowerCalc() {
      document.getElementById('power-calc-power').value = '';
      document.getElementById('power-calc-voltage').value = '';
      document.getElementById('power-calc-current').value = '';
      document.getElementById('power-calc-result').style.display = 'none';
    }

    // Energy Calculator (any 2 values)
    function calculateEnergyAny() {
      const energy = parseFloat(document.getElementById('energy-calc-energy').value);
      const power = parseFloat(document.getElementById('energy-calc-power').value);
      const time = parseFloat(document.getElementById('energy-calc-time').value);
      
      const resultDiv = document.getElementById('energy-calc-result');
      const answerDiv = document.getElementById('energy-calc-answer');
      
      let filledCount = 0;
      if (!isNaN(energy)) filledCount++;
      if (!isNaN(power)) filledCount++;
      if (!isNaN(time)) filledCount++;
      
      if (filledCount < 2) {
        resultDiv.style.display = 'none';
        return;
      }
      
      if (filledCount === 3) {
        answerDiv.textContent = 'Please enter only 2 values!';
        resultDiv.style.display = 'block';
        return;
      }
      
      let result = '';
      
      if (isNaN(energy)) {
        const e = (power * time) / 1000;
        result = `Energy = ${e.toFixed(2)}kWh`;
        document.getElementById('energy-calc-energy').value = e.toFixed(2);
      } else if (isNaN(power)) {
        const p = (energy * 1000) / time;
        result = `Power = ${p.toFixed(2)}W`;
        document.getElementById('energy-calc-power').value = p.toFixed(2);
      } else if (isNaN(time)) {
        const t = (energy * 1000) / power;
        result = `Time = ${t.toFixed(2)} hours`;
        document.getElementById('energy-calc-time').value = t.toFixed(2);
      }
      
      answerDiv.textContent = result;
      resultDiv.style.display = 'block';
    }

    function clearEnergyCalc() {
      document.getElementById('energy-calc-energy').value = '';
      document.getElementById('energy-calc-power').value = '';
      document.getElementById('energy-calc-time').value = '';
      document.getElementById('energy-calc-result').style.display = 'none';
    }

    // Energy Cost Calculator
    // Real-time calculator: computes energy (kWh) and costs using current inputs.
    function calculateCost() {
      // Read inputs (default to 0 when empty)
      const power = parseFloat(document.getElementById('cost-power').value) || 0; // W
      const hours = parseFloat(document.getElementById('cost-hours').value) || 0; // h/day
      const rate = parseFloat(document.getElementById('cost-rate').value) || 0; // ‚Ç±/kWh

      // Physics-based computation
      const energyKwh = (power * hours) / 1000; // kWh per day
      const dailyCost = energyKwh * rate; // ‚Ç± per day
      const monthlyCost = dailyCost * 30;
      const yearlyCost = dailyCost * 365;

      // Update final answer fields (always show numeric answers)
      const energyEl = document.getElementById('cost-energy');
      const dailyEl = document.getElementById('daily-cost');
      const monthlyEl = document.getElementById('monthly-cost');
      const yearlyEl = document.getElementById('yearly-cost');

      if (energyEl) energyEl.textContent = energyKwh.toFixed(2);
      if (dailyEl) dailyEl.textContent = dailyCost.toFixed(2);
      if (monthlyEl) monthlyEl.textContent = monthlyCost.toFixed(2);
      if (yearlyEl) yearlyEl.textContent = yearlyCost.toFixed(2);

      // Ensure result container is visible
      const resultContainer = document.getElementById('cost-result');
      if (resultContainer) resultContainer.style.display = 'block';

      // If student chose to view the solution, show step-by-step calculations
      const solContainer = document.getElementById('cost-solution');
      const solSteps = document.getElementById('cost-solution-steps');
      if (solContainer && solContainer.classList.contains('show') && solSteps) {
        // Build friendly step-by-step explanation using current values
        solSteps.innerHTML = '' +
          `<p><strong>Given:</strong> Power = ${power} W, Time = ${hours} h/day, Rate = ‚Ç±${rate}/kWh</p>` +
          `<p><strong>Step 1 ‚Äî Energy (kWh):</strong> Energy = (Power √ó Time) / 1000 = (${power} √ó ${hours}) / 1000 = ${energyKwh.toFixed(2)} kWh</p>` +
          `<p><strong>Step 2 ‚Äî Daily Cost:</strong> Cost = Energy √ó Rate = ${energyKwh.toFixed(2)} √ó ${rate} = ‚Ç±${dailyCost.toFixed(2)}</p>` +
          `<p><strong>Step 3 ‚Äî Monthly & Yearly:</strong> Monthly = Daily √ó 30 = ‚Ç±${monthlyCost.toFixed(2)}; Yearly = Daily √ó 365 = ‚Ç±${yearlyCost.toFixed(2)}</p>`;
      }
    }

    // Toggle the step-by-step solution visibility for the cost calculator
    function toggleCostSolution() {
      const sol = document.getElementById('cost-solution');
      const btn = document.getElementById('cost-solution-btn');
      if (!sol || !btn) return;
      sol.classList.toggle('show');
      // reflect open/closed state in button label
      if (sol.classList.contains('show')) {
        btn.textContent = 'Hide Solution';
        // populate solution immediately with current values
        calculateCost();
        // ensure solution is visible (use existing .solution.show CSS behavior)
        sol.style.display = 'block';
      } else {
        btn.textContent = 'Show Solution';
        sol.style.display = 'none';
      }
    }

    // Toggle the How-to-Use collapsible panel
    function toggleHowToUse() {
      const panel = document.getElementById('cost-howto');
      if (!panel) return;
      panel.classList.toggle('show');
      if (panel.classList.contains('show')) panel.style.display = 'block'; else panel.style.display = 'none';
    }

    // Household Energy Manager (uses single `householdAppliances` declared earlier)

    function toggleHouseholdAppliance(index, state) {
      householdAppliances[index].active = state;

      // update card visual state
      const cards = document.querySelectorAll('.household-card');
      if (cards && cards[index]) {
        cards[index].classList.toggle('active', !!state);
      }

      // update electricity cost immediately
      updateHouseholdCost();
    }

    function updateHouseholdHours(index) {
      const el = document.getElementById(`hours-${index}`);
      if (!el) return;
      const hours = parseFloat(el.value) || 0;
      householdAppliances[index].hours = hours;
      const disp = document.getElementById(`hours-display-${index}`);
      if (disp) disp.textContent = hours;
      updateHouseholdCost();
    }

    function updateHouseholdCost() {
      const rate = 11.50;
      let totalEnergyKwh = 0;

      householdAppliances.forEach(appliance => {
        if (appliance.active) {
          totalEnergyKwh += (appliance.power * appliance.hours) / 1000;
        }
      });

      const dailyCost = totalEnergyKwh * rate;
      const monthlyCost = dailyCost * 30;
      const yearlyCost = dailyCost * 365;

      const eEl = document.getElementById('household-energy');
      const dEl = document.getElementById('household-daily');
      const mEl = document.getElementById('household-monthly');
      const yEl = document.getElementById('household-yearly');

      if (eEl) eEl.textContent = totalEnergyKwh.toFixed(2);
      if (dEl) dEl.textContent = dailyCost.toFixed(2);
      if (mEl) mEl.textContent = monthlyCost.toFixed(2);
      if (yEl) yEl.textContent = yearlyCost.toFixed(2);
    }

    // Battery Bank Calculator
    function calculateBatteryBank() {
      const config = document.getElementById('bb-config').value;
      const voltage = parseFloat(document.getElementById('bb-voltage').value);
      const capacity = parseFloat(document.getElementById('bb-capacity').value);
      const seriesCount = parseInt(document.getElementById('bb-series-count').value);
      const parallelCount = parseInt(document.getElementById('bb-parallel-count').value);
      
      if (isNaN(voltage) || isNaN(capacity) || isNaN(seriesCount) || isNaN(parallelCount)) {
        return;
      }
      
      let totalVoltage, totalCapacity, totalBatteries;
      
      if (config === 'series') {
        totalVoltage = voltage * seriesCount;
        totalCapacity = capacity;
        totalBatteries = seriesCount;
      } else if (config === 'parallel') {
        totalVoltage = voltage;
        totalCapacity = capacity * parallelCount;
        totalBatteries = parallelCount;
      } else {
        totalVoltage = voltage * seriesCount;
        totalCapacity = capacity * parallelCount;
        totalBatteries = seriesCount * parallelCount;
      }
      
      const energy = totalVoltage * totalCapacity;
      
      document.getElementById('bb-total-voltage').textContent = totalVoltage;
      document.getElementById('bb-total-capacity').textContent = totalCapacity;
      document.getElementById('bb-total-batteries').textContent = totalBatteries;
      document.getElementById('bb-energy').textContent = energy.toFixed(0);
      document.getElementById('bb-result').style.display = 'block';
    }

    // Auto Component Analyzer
    function updateAutoComponent() {
      const component = document.getElementById('auto-component').value;
      const powerInput = document.getElementById('auto-power');
      
      const powers = {
        headlight: 55,
        starter: 1500,
        radio: 20,
        ac: 500
      };
      
      if (powers[component]) {
        powerInput.value = powers[component];
      }
    }

    function calculateAuto() {
      const power = parseFloat(document.getElementById('auto-power').value);
      const voltage = parseFloat(document.getElementById('auto-voltage').value);
      
      if (isNaN(power) || isNaN(voltage)) {
        return;
      }
      
      const current = power / voltage;
      const resistance = voltage / current;
      const fuse = Math.ceil(current * 1.25);
      
      document.getElementById('auto-current').textContent = current.toFixed(2);
      document.getElementById('auto-resistance').textContent = resistance.toFixed(2);
      document.getElementById('auto-fuse').textContent = fuse;
      
      const warning = document.getElementById('auto-warning');
      if (current > 20) {
        warning.style.display = 'block';
      } else {
        warning.style.display = 'none';
      }
      
      document.getElementById('auto-result').style.display = 'block';
    }

    // Solar Calculator
    function calculateSolar() {
      const dailyUsage = parseFloat(document.getElementById('solar-daily-usage').value);
      const sunHours = parseFloat(document.getElementById('solar-sun-hours').value);
      const panelWattage = parseFloat(document.getElementById('solar-panel-wattage').value);
      const efficiency = parseFloat(document.getElementById('solar-efficiency').value) / 100;
      
      if (isNaN(dailyUsage) || isNaN(sunHours) || isNaN(panelWattage) || isNaN(efficiency)) {
        return;
      }
      
      const requiredPower = (dailyUsage / sunHours) / efficiency;
      const numPanels = Math.ceil(requiredPower * 1000 / panelWattage);
      const totalWattage = numPanels * panelWattage;
      const generation = (totalWattage / 1000) * sunHours * efficiency;
      
      document.getElementById('solar-system-size').textContent = requiredPower.toFixed(2);
      document.getElementById('solar-panels').textContent = numPanels;
      document.getElementById('solar-total-wattage').textContent = totalWattage;
      document.getElementById('solar-generation').textContent = generation.toFixed(2);
      document.getElementById('solar-result').style.display = 'block';
    }

    // üîì expose household functions for inline buttons
window.toggleHouseholdAppliance = toggleHouseholdAppliance;
window.updateHouseholdHours = updateHouseholdHours;

  </script>
  <script>
    (function(){
      // Quiz records storage helper
      function loadRecords(){
        try{ return JSON.parse(localStorage.getItem('quizRecords')||'[]'); }catch(e){ return []; }
      }
      function saveRecords(recs){
        try{ localStorage.setItem('quizRecords', JSON.stringify(recs)); }catch(e){ console.error('saveRecords', e); }
      }

      function recordQuizResult(obj){
        try{
          // obj: { quizName, score, total, passed, timestamp }
          const studentName = localStorage.getItem('studentName') || '';
          const studentSection = localStorage.getItem('studentSection') || '';
          const rec = {
            name: studentName,
            section: studentSection,
            quiz: obj.quizName || obj.quiz || 'unknown',
            score: (typeof obj.score !== 'undefined') ? Number(obj.score) : null,
            total: (typeof obj.total !== 'undefined') ? Number(obj.total) : null,
            percentage: (typeof obj.score !== 'undefined' && typeof obj.total !== 'undefined' && Number(obj.total) > 0) ? (Number(obj.score)/Number(obj.total)*100) : (typeof obj.percentage !== 'undefined' ? Number(obj.percentage) : null),
            passed: !!obj.passed,
            timestamp: obj.timestamp || new Date().toISOString()
          };
          const recs = loadRecords();
          recs.push(rec);
          saveRecords(recs);
          console.log('quiz recorded', rec);
        }catch(e){ console.error('recordQuizResult', e); }
      }

      // Try common score key patterns for an incoming quiz prefix
      function tryBuildFromStorageKey(prefix){
        try{
          const quizName = prefix.replace(/Passed$|passed$/i, '');
          const passed = (localStorage.getItem(prefix) === 'true');
          // attempt to read score/total from several conventions
          const variants = [quizName+'Score', quizName+'score', quizName+'Correct', quizName+'correct', quizName+'Total', quizName+'total'];
          let score = null, total = null;
          variants.forEach(k=>{
            const v = localStorage.getItem(k);
            if(v==null) return;
            const num = Number(v);
            if(isFinite(num)){
              if(k.toLowerCase().indexOf('total')>=0) total = num;
              else if(k.toLowerCase().indexOf('score')>=0 || k.toLowerCase().indexOf('correct')>=0) score = num;
            }
          });
          const obj = { quizName, score, total, passed, timestamp: new Date().toISOString() };
          recordQuizResult(obj);
        }catch(e){ console.error(e); }
      }

      // Listen for storage events (fires when other windows/iframes alter localStorage)
      window.addEventListener('storage', function(e){
        if(!e.key) return;
        // quiz passed keys often end with 'Passed' or 'passed'
        if(/passed$/i.test(e.key)){
          tryBuildFromStorageKey(e.key);
        }
      });

      // Listen for postMessage from quizzes (preferred if quiz supports it)
      window.addEventListener('message', function(ev){
        try{
          const data = ev.data;
          if(!data) return;
          if(typeof data === 'object' && data.type === 'quizResult'){
            // expected shape: { type:'quizResult', quiz:'ohms', score:5, total:7, passed:true }
            recordQuizResult({ quizName: data.quiz || data.quizName, score: data.score, total: data.total, percentage: data.percentage, passed: data.passed, timestamp: data.timestamp });
          }
        }catch(e){ console.error('message handler', e); }
      });

      // Teacher UI: show records and export as CSV
      function formatCSV(rows){
        const esc = v => '"'+String(v === null || typeof v === 'undefined' ? '' : v).replace(/"/g,'""')+'"';
        const header = ['Name','Section','Quiz','Score','Total','Percentage','Passed','Timestamp'];
        const lines = [header.map(esc).join(',')];
        rows.forEach(r=>{
          lines.push([r.name,r.section,r.quiz,r.score,r.total,r.percentage!=null?r.percentage.toFixed(2):'',r.passed,r.timestamp].map(esc).join(','));
        });
        return lines.join('\n');
      }

      function buildRecordsTable(){
        const recs = loadRecords();
        // group by section
        const bySection = {};
        recs.forEach(r=>{
          const s = r.section || 'Unknown';
          (bySection[s] = bySection[s]||[]).push(r);
        });
        return bySection;
      }

      function showRecordsModal(){
        const bySection = buildRecordsTable();
        // modal overlay
        let modal = document.getElementById('qr-modal');
        if(modal) modal.remove();
        modal = document.createElement('div');
        modal.id = 'qr-modal';
        modal.style.position = 'fixed'; modal.style.inset = '0'; modal.style.background = 'rgba(0,0,0,0.6)'; modal.style.zIndex = 200000; modal.style.display = 'flex'; modal.style.alignItems = 'center'; modal.style.justifyContent = 'center';
        const box = document.createElement('div');
        box.style.width = '90%'; box.style.maxWidth = '1000px'; box.style.maxHeight = '90%'; box.style.overflow = 'auto'; box.style.background = '#071026'; box.style.border = '1px solid rgba(0,212,255,0.12)'; box.style.borderRadius='10px'; box.style.padding='18px'; box.style.color='#eaffff';
        const title = document.createElement('h2'); title.textContent = 'Quiz Records (grouped by section)'; title.style.margin='0 0 12px 0'; title.style.color='#00f6ff';
        box.appendChild(title);
        const exportBtn = document.createElement('button'); exportBtn.textContent='Export CSV'; exportBtn.style.margin='6px'; exportBtn.className='btn';
        exportBtn.addEventListener('click', function(){
          const recs = loadRecords();
          const csv = formatCSV(recs);
          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a'); a.href = url; a.download = 'quiz-records.csv'; a.style.display='none'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
        });
        box.appendChild(exportBtn);
        const closeBtn = document.createElement('button'); closeBtn.textContent='Close'; closeBtn.className='btn btn-secondary'; closeBtn.style.margin='6px'; closeBtn.addEventListener('click', ()=>modal.remove());
        box.appendChild(closeBtn);

        Object.keys(bySection).sort().forEach(section=>{
          const h = document.createElement('h3'); h.textContent = section; h.style.color='#00ffff'; h.style.marginTop='14px'; box.appendChild(h);
          const table = document.createElement('table'); table.style.width='100%'; table.style.borderCollapse='collapse'; table.style.marginBottom='8px';
          const thead = document.createElement('thead'); const thr = document.createElement('tr'); ['Name','Quiz','Score','Total','%','Passed','Time'].forEach(t=>{ const th=document.createElement('th'); th.textContent=t; th.style.textAlign='left'; th.style.padding='6px'; th.style.borderBottom='1px solid rgba(255,255,255,0.06)'; th.style.color='#bfeaff'; thr.appendChild(th); }); thead.appendChild(thr); table.appendChild(thead);
          const tbody = document.createElement('tbody');
          bySection[section].forEach(r=>{
            const tr = document.createElement('tr');
            [r.name||'', r.quiz||'', r.score!=null?r.score:'', r.total!=null?r.total:'', r.percentage!=null?Number(r.percentage).toFixed(2):'', r.passed? 'YES':'NO', r.timestamp||'' ].forEach(v=>{ const td=document.createElement('td'); td.textContent = v; td.style.padding='6px'; td.style.borderBottom='1px solid rgba(255,255,255,0.03)'; td.style.color='#eafcff'; tr.appendChild(td); });
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);
          box.appendChild(table);
        });

        modal.appendChild(box);
        document.body.appendChild(modal);
      }

      // Add teacher button to #teacherControls when role is teacher
      function updateTeacherControls(){
        try{
          const tc = document.getElementById('teacherControls');
          if(!tc) return;
          const existing = document.getElementById('viewQuizRecordsBtn');
          const role = localStorage.getItem('role');
          if(role === 'teacher'){
            if(!existing){
              const btn = document.createElement('button'); btn.id='viewQuizRecordsBtn'; btn.textContent='üìã Quiz Records'; btn.className='btn'; btn.style.marginLeft='8px'; btn.addEventListener('click', showRecordsModal);
              tc.appendChild(btn);
            }
          } else {
            if(existing) existing.remove();
          }
        }catch(e){ console.error(e); }
      }

      // initialize
      try{ updateTeacherControls(); }catch(e){}
      // react to role changes
      window.addEventListener('storage', function(e){ if(e.key === 'role'){ updateTeacherControls(); } });

    })();
  </script>
  <script>
  // other JS above (quiz, buttons, etc.)

  // üîí LOCK / UNLOCK SERIES BUTTON
  const seriesBtn = document.getElementById("seriesBtn");
  const passed = localStorage.getItem("ohmsPassed");
  if (seriesBtn) {
    const role = localStorage.getItem('role');
    if (passed === "true" || role === 'teacher') {
      seriesBtn.disabled = false;
      seriesBtn.innerText = "üîì Series Circuits";
      seriesBtn.style.opacity = "1";
      seriesBtn.style.cursor = "pointer";
    } else {
      seriesBtn.disabled = true;
      seriesBtn.style.opacity = "0.4";
      seriesBtn.style.cursor = "not-allowed";
    }
  }

  // üîí TEACHER LOCK SYSTEM
  function lockAllTopics() {
    localStorage.removeItem("ohmsPassed");
    localStorage.removeItem("seriesPassed");
    localStorage.removeItem("parallelPassed");
    alert("üîí All topics locked.");
    location.reload();
  }

  function teacherUnlock() {
    const pwd = prompt("üîë Teacher password:");
    if (pwd === "teacher123") {
      localStorage.setItem("ohmsPassed", "true");
      localStorage.setItem("seriesPassed", "true");
      localStorage.setItem("parallelPassed", "true");
      alert("‚úÖ All topics unlocked.");
      location.reload();
    } else {
      alert("‚ùå Wrong password.");
    }
  }
  // ‚ö° ELECTRIC CHARGE PAGE LINK
function openCharge() {
  window.location.href = "electric-charge.html";
}
const lightBeam = document.getElementById("light-beam");
const beamGlow = document.getElementById("beam-glow");

function updateFlashlightBeam(totalVoltage) {
  const brightness = Math.min(totalVoltage / 6, 1);

  if (lightBeam) {
    let color = "#ff4444"; // low voltage (red)

    if (totalVoltage >= 3) color = "#ffee88";
    if (totalVoltage >= 6) color = "#ccffff";

    lightBeam.style.fill = color;
    lightBeam.style.opacity = 0.3 + brightness * 0.7;
  }

  if (beamGlow) {
    beamGlow.style.fill = color;
    beamGlow.style.opacity = brightness;
  }
}
document.addEventListener("DOMContentLoaded", function () {
  updateSimulation();
  updateBatteryDisplay();
  updateHouseholdCost();
  updateParallelSim();
  updateBatteryParallel();
});
</script>
  <script>
    // Parallel lock script ‚Äî placed at the very bottom to run once after DOM is ready.
    document.addEventListener('DOMContentLoaded', function () {
      const parallelBtn = document.getElementById('parallelBtn');
      const parallelCard = document.getElementById('parallelCard');
      const seriesPassed = localStorage.getItem('seriesPassed');
      const role = localStorage.getItem('role');

      // Helper: create an overlay inside the card to capture clicks and show alert
      function addCardOverlay(card) {
        if (!card) return;
        // avoid duplicate overlays
        if (card.querySelector('.parallel-lock-overlay')) return;
        // ensure card is positioned so overlay can cover it
        const prevPosition = window.getComputedStyle(card).position;
        if (prevPosition === 'static' || !prevPosition) card.style.position = 'relative';
        const overlay = document.createElement('div');
        overlay.className = 'parallel-lock-overlay';
        overlay.style.position = 'absolute';
        overlay.style.inset = '0';
        overlay.style.zIndex = '999';
        overlay.style.background = 'transparent';
        overlay.style.cursor = 'not-allowed';
        overlay.addEventListener('click', function (ev) {
          ev.preventDefault();
          ev.stopPropagation();
          alert('Please pass the Series Circuits quiz to unlock Parallel Circuits.');
        });
        card.appendChild(overlay);
      }

      function removeCardOverlay(card) {
        if (!card) return;
        const overlay = card.querySelector('.parallel-lock-overlay');
        if (overlay) overlay.remove();
      }

      if (seriesPassed === 'true' || role === 'teacher') {
        if (parallelBtn) {
          parallelBtn.style.pointerEvents = 'auto';
          parallelBtn.style.opacity = '1';
          parallelBtn.style.cursor = 'pointer';
          parallelBtn.innerText = 'üîì Parallel Circuits';
          parallelBtn.disabled = false;
        }
        if (parallelCard) {
          parallelCard.style.pointerEvents = 'auto';
          parallelCard.style.opacity = '1';
          parallelCard.style.cursor = 'pointer';
          removeCardOverlay(parallelCard);
        }
      } else {
        if (parallelBtn) {
          parallelBtn.style.pointerEvents = 'none';
          parallelBtn.style.opacity = '0.4';
          parallelBtn.style.cursor = 'not-allowed';
          parallelBtn.innerText = 'üîí Parallel Circuits (Locked)';
          parallelBtn.disabled = true;
        }
        if (parallelCard) {
          // visually indicate locked
          parallelCard.style.opacity = '0.4';
          parallelCard.style.cursor = 'not-allowed';
          // disable pointer events on underlying card to prevent default onclick
          parallelCard.style.pointerEvents = 'none';
          // add an overlay to capture clicks and show an explanatory alert
          addCardOverlay(parallelCard);
        }
      }
    });
  </script>

  
 </body>
</html>

